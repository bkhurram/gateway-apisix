{"main":{"upstream_hash_header_schema":{"type":"string","pattern":"^[a-zA-Z0-9-_]+$"},"proto":{"type":"object","properties":{"content":{"type":"string","minLength":1,"maxLength":1048576},"create_time":{"type":"integer"},"update_time":{"type":"integer"},"desc":{"type":"string","maxLength":256},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]}},"additionalProperties":false,"required":["content"]},"stream_route":{"type":"object","properties":{"create_time":{"type":"integer"},"server_port":{"type":"integer","description":"server port","maximum":65535,"minimum":1},"protocol":{"type":"object","properties":{"conf":{"type":"object","description":"protocol-specific configuration"},"logger":{"type":"array","items":{"dependencies":{"name":["conf"]},"additionalProperties":false,"properties":{"filter":{"type":"array","description":"logger filter rules"},"conf":{"type":"object","description":"logger plugin configuration"},"name":{"type":"string"}}}},"name":{"type":"string"},"superior_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]}},"required":["name"]},"server_addr":{"type":"string","description":"server IP","anyOf":[{"type":"string","title":"IPv4","format":"ipv4"},{"type":"string","title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"type":"string","title":"IPv6","format":"ipv6"},{"type":"string","title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"plugins":{"type":"object"},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"upstream_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"remote_addr":{"type":"string","description":"client IP","anyOf":[{"type":"string","title":"IPv4","format":"ipv4"},{"type":"string","title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"type":"string","title":"IPv6","format":"ipv6"},{"type":"string","title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"desc":{"type":"string","maxLength":256},"sni":{"type":"string","description":"server name indication","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"service_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"upstream":{"type":"object","properties":{"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"create_time":{"type":"integer"},"retries":{"type":"integer","minimum":0},"retry_timeout":{"type":"number","minimum":0},"scheme":{"description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.","enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"default":"http"},"checks":{"type":"object","properties":{"passive":{"type":"object","properties":{"type":{"type":"string","enum":["http","https","tcp"],"default":"http"},"healthy":{"type":"object","properties":{"successes":{"type":"integer","default":5,"maximum":254,"minimum":0},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]}}},"unhealthy":{"type":"object","properties":{"http_failures":{"type":"integer","default":5,"maximum":254,"minimum":0},"tcp_failures":{"type":"integer","default":2,"maximum":254,"minimum":0},"timeouts":{"type":"integer","default":7,"maximum":254,"minimum":0},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[429,500,503]}}}}},"active":{"type":"object","properties":{"concurrency":{"type":"integer","default":10},"http_path":{"type":"string","default":"/"},"https_verify_certificate":{"type":"boolean","default":true},"unhealthy":{"type":"object","properties":{"interval":{"type":"integer","default":1,"minimum":1},"http_failures":{"type":"integer","default":5,"maximum":254,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[429,404,500,501,502,503,504,505]},"timeouts":{"type":"integer","default":3,"maximum":254,"minimum":1},"tcp_failures":{"type":"integer","default":2,"maximum":254,"minimum":1}}},"timeout":{"type":"number","default":1},"port":{"type":"integer","maximum":65535,"minimum":1},"req_headers":{"type":"array","items":{"type":"string","uniqueItems":true},"minItems":1},"type":{"type":"string","enum":["http","https","tcp"],"default":"http"},"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"healthy":{"type":"object","properties":{"interval":{"type":"integer","default":1,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[200,302]},"successes":{"type":"integer","default":2,"maximum":254,"minimum":1}}}}}},"additionalProperties":false,"anyOf":[{"required":["active"]},{"required":["active","passive"]}]},"hash_on":{"type":"string","enum":["vars","header","cookie","consumer","vars_combinations"],"default":"vars"},"pass_host":{"type":"string","description":"mod of host passing","enum":["pass","node","rewrite"],"default":"pass"},"upstream_host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"name":{"type":"string","minLength":1,"maxLength":100},"discovery_type":{"type":"string","description":"discovery type"},"discovery_args":{"type":"object","properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}}},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"service_name":{"type":"string","minLength":1,"maxLength":256},"keepalive_pool":{"type":"object","properties":{"size":{"type":"integer","minimum":1,"default":320},"requests":{"type":"integer","minimum":1,"default":1000},"idle_timeout":{"type":"number","minimum":0,"default":60}}},"timeout":{"type":"object","properties":{"connect":{"type":"number","exclusiveMinimum":0},"send":{"type":"number","exclusiveMinimum":0},"read":{"type":"number","exclusiveMinimum":0}},"required":["connect","send","read"]},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"desc":{"type":"string","maxLength":256},"tls":{"type":"object","properties":{"client_key":{"type":"string","minLength":128,"maxLength":65536},"client_cert_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"client_cert":{"type":"string","minLength":128,"maxLength":65536},"verify":{"type":"boolean","description":"Turn on server certificate verification, currently only kafka upstream is supported","default":false}},"dependencies":{"client_key":{"required":["client_cert"]},"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_cert":{"required":["client_key"]}}},"nodes":{"anyOf":[{"type":"object","patternProperties":{".*":{"type":"integer","description":"weight of node","minimum":0}}},{"type":"array","items":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of node","default":0},"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"weight":{"type":"integer","description":"weight of node","minimum":0},"port":{"type":"integer","description":"port of node","maximum":65535,"minimum":1},"metadata":{"type":"object","description":"metadata of node"}},"required":["host","weight"]}}]},"update_time":{"type":"integer"},"type":{"type":"string","description":"algorithms of load balancing","default":"roundrobin"}},"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"additionalProperties":false},"update_time":{"type":"integer"}},"additionalProperties":false},"upstream_hash_vars_schema":{"type":"string","pattern":"^((uri|server_name|server_addr|request_uri|remote_port|remote_addr|query_string|host|hostname|mqtt_client_id)|arg_[0-9a-zA-z_-]+)$"},"consumer_group":{"type":"object","properties":{"plugins":{"type":"object"},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"desc":{"type":"string","maxLength":256},"update_time":{"type":"integer"},"create_time":{"type":"integer"},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]}},"additionalProperties":false,"required":["id","plugins"]},"plugins":{"type":"array","items":{"type":"object","properties":{"additionalProperties":false,"stream":{"type":"boolean"},"name":{"type":"string","minLength":1}},"required":["name"]}},"plugin_config":{"type":"object","properties":{"plugins":{"type":"object"},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"desc":{"type":"string","maxLength":256},"update_time":{"type":"integer"},"create_time":{"type":"integer"},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"name":{"type":"string"}},"additionalProperties":false,"required":["id","plugins"]},"consumer":{"type":"object","properties":{"plugins":{"type":"object"},"username":{"type":"string","pattern":"^[a-zA-Z0-9_]+$","minLength":1,"maxLength":100},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"update_time":{"type":"integer"},"group_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"desc":{"type":"string","maxLength":256},"create_time":{"type":"integer"}},"required":["username"],"additionalProperties":false},"ssl":{"type":"object","properties":{"key":{"oneOf":[{"type":"string","minLength":128,"maxLength":65536},{"type":"string","pattern":"^\\$(secret|env|ENV)://"}]},"create_time":{"type":"integer"},"update_time":{"type":"integer"},"ssl_protocols":{"type":"array","description":"set ssl protocols","maxItems":3,"uniqueItems":true,"items":{"enum":["TLSv1.1","TLSv1.2","TLSv1.3"]}},"keys":{"type":"array","items":{"oneOf":[{"type":"string","minLength":128,"maxLength":65536},{"type":"string","pattern":"^\\$(secret|env|ENV)://"}]}},"snis":{"type":"array","items":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"minItems":1},"type":{"type":"string","description":"ssl certificate type, server to server certificate, client to client certificate for upstream","enum":["server","client"],"default":"server"},"status":{"type":"integer","description":"ssl status, 1 to enable, 0 to disable","enum":[1,0],"default":1},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"client":{"type":"object","properties":{"depth":{"type":"integer","default":1,"minimum":0},"skip_mtls_uri_regex":{"type":"array","uniqueItems":true,"items":{"type":"string","description":"uri regular expression to skip mtls"},"minItems":1},"ca":{"type":"string","minLength":128,"maxLength":65536}},"required":["ca"]},"cert":{"oneOf":[{"type":"string","minLength":128,"maxLength":65536},{"type":"string","pattern":"^\\$(secret|env|ENV)://"}]},"sni":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"certs":{"type":"array","items":{"oneOf":[{"type":"string","minLength":128,"maxLength":65536},{"type":"string","pattern":"^\\$(secret|env|ENV)://"}]}}},"if":{"properties":{"type":{"enum":["server"]}}},"else":{"required":["key","cert"]},"additionalProperties":false,"then":{"oneOf":[{"required":["sni","key","cert"]},{"required":["snis","key","cert"]}]}},"route":{"type":"object","properties":{"create_time":{"type":"integer"},"update_time":{"type":"integer"},"uri":{"type":"string","minLength":1,"maxLength":4096},"status":{"type":"integer","description":"route status, 1 to enable, 0 to disable","enum":[1,0],"default":1},"methods":{"type":"array","items":{"type":"string","description":"HTTP method","enum":["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE","PURGE"]},"uniqueItems":true},"hosts":{"type":"array","uniqueItems":true,"items":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"minItems":1},"remote_addrs":{"type":"array","uniqueItems":true,"items":{"type":"string","description":"client IP","anyOf":[{"type":"string","title":"IPv4","format":"ipv4"},{"type":"string","title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"type":"string","title":"IPv6","format":"ipv6"},{"type":"string","title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"minItems":1},"filter_func":{"type":"string","minLength":10,"pattern":"^function"},"vars":{"type":"array"},"script_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"service_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"name":{"type":"string","minLength":1,"maxLength":100},"priority":{"type":"integer","default":0},"script":{"type":"string","minLength":10,"maxLength":102400},"enable_websocket":{"type":"boolean","description":"enable websocket for request"},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"upstream_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"plugin_config_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"plugins":{"type":"object"},"timeout":{"type":"object","properties":{"connect":{"type":"number","exclusiveMinimum":0},"send":{"type":"number","exclusiveMinimum":0},"read":{"type":"number","exclusiveMinimum":0}},"required":["connect","send","read"]},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"uris":{"type":"array","uniqueItems":true,"items":{"type":"string","description":"HTTP uri"},"minItems":1},"desc":{"type":"string","maxLength":256},"remote_addr":{"type":"string","description":"client IP","anyOf":[{"type":"string","title":"IPv4","format":"ipv4"},{"type":"string","title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"type":"string","title":"IPv6","format":"ipv6"},{"type":"string","title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"upstream":{"type":"object","properties":{"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"create_time":{"type":"integer"},"retries":{"type":"integer","minimum":0},"retry_timeout":{"type":"number","minimum":0},"scheme":{"description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.","enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"default":"http"},"checks":{"type":"object","properties":{"passive":{"type":"object","properties":{"type":{"type":"string","enum":["http","https","tcp"],"default":"http"},"healthy":{"type":"object","properties":{"successes":{"type":"integer","default":5,"maximum":254,"minimum":0},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]}}},"unhealthy":{"type":"object","properties":{"http_failures":{"type":"integer","default":5,"maximum":254,"minimum":0},"tcp_failures":{"type":"integer","default":2,"maximum":254,"minimum":0},"timeouts":{"type":"integer","default":7,"maximum":254,"minimum":0},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[429,500,503]}}}}},"active":{"type":"object","properties":{"concurrency":{"type":"integer","default":10},"http_path":{"type":"string","default":"/"},"https_verify_certificate":{"type":"boolean","default":true},"unhealthy":{"type":"object","properties":{"interval":{"type":"integer","default":1,"minimum":1},"http_failures":{"type":"integer","default":5,"maximum":254,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[429,404,500,501,502,503,504,505]},"timeouts":{"type":"integer","default":3,"maximum":254,"minimum":1},"tcp_failures":{"type":"integer","default":2,"maximum":254,"minimum":1}}},"timeout":{"type":"number","default":1},"port":{"type":"integer","maximum":65535,"minimum":1},"req_headers":{"type":"array","items":{"type":"string","uniqueItems":true},"minItems":1},"type":{"type":"string","enum":["http","https","tcp"],"default":"http"},"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"healthy":{"type":"object","properties":{"interval":{"type":"integer","default":1,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[200,302]},"successes":{"type":"integer","default":2,"maximum":254,"minimum":1}}}}}},"additionalProperties":false,"anyOf":[{"required":["active"]},{"required":["active","passive"]}]},"hash_on":{"type":"string","enum":["vars","header","cookie","consumer","vars_combinations"],"default":"vars"},"pass_host":{"type":"string","description":"mod of host passing","enum":["pass","node","rewrite"],"default":"pass"},"upstream_host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"name":{"type":"string","minLength":1,"maxLength":100},"discovery_type":{"type":"string","description":"discovery type"},"discovery_args":{"type":"object","properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}}},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"service_name":{"type":"string","minLength":1,"maxLength":256},"keepalive_pool":{"type":"object","properties":{"size":{"type":"integer","minimum":1,"default":320},"requests":{"type":"integer","minimum":1,"default":1000},"idle_timeout":{"type":"number","minimum":0,"default":60}}},"timeout":{"type":"object","properties":{"connect":{"type":"number","exclusiveMinimum":0},"send":{"type":"number","exclusiveMinimum":0},"read":{"type":"number","exclusiveMinimum":0}},"required":["connect","send","read"]},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"desc":{"type":"string","maxLength":256},"tls":{"type":"object","properties":{"client_key":{"type":"string","minLength":128,"maxLength":65536},"client_cert_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"client_cert":{"type":"string","minLength":128,"maxLength":65536},"verify":{"type":"boolean","description":"Turn on server certificate verification, currently only kafka upstream is supported","default":false}},"dependencies":{"client_key":{"required":["client_cert"]},"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_cert":{"required":["client_key"]}}},"nodes":{"anyOf":[{"type":"object","patternProperties":{".*":{"type":"integer","description":"weight of node","minimum":0}}},{"type":"array","items":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of node","default":0},"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"weight":{"type":"integer","description":"weight of node","minimum":0},"port":{"type":"integer","description":"port of node","maximum":65535,"minimum":1},"metadata":{"type":"object","description":"metadata of node"}},"required":["host","weight"]}}]},"update_time":{"type":"integer"},"type":{"type":"string","description":"algorithms of load balancing","default":"roundrobin"}},"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"additionalProperties":false},"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"}},"additionalProperties":false,"allOf":[{"oneOf":[{"required":["uri"]},{"required":["uris"]}]},{"oneOf":[{"not":{"anyOf":[{"required":["host"]},{"required":["hosts"]}]}},{"required":["host"]},{"required":["hosts"]}]},{"oneOf":[{"not":{"anyOf":[{"required":["remote_addr"]},{"required":["remote_addrs"]}]}},{"required":["remote_addr"]},{"required":["remote_addrs"]}]}],"not":{"anyOf":[{"required":["script","plugins"]},{"required":["script","plugin_config_id"]}]},"anyOf":[{"required":["plugins","uri"]},{"required":["upstream","uri"]},{"required":["upstream_id","uri"]},{"required":["service_id","uri"]},{"required":["plugins","uris"]},{"required":["upstream","uris"]},{"required":["upstream_id","uris"]},{"required":["service_id","uris"]},{"required":["script","uri"]},{"required":["script","uris"]}]},"global_rule":{"type":"object","properties":{"plugins":{"type":"object"},"create_time":{"type":"integer"},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"update_time":{"type":"integer"}},"required":["id","plugins"],"additionalProperties":false},"upstream":{"type":"object","properties":{"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"create_time":{"type":"integer"},"retries":{"type":"integer","minimum":0},"retry_timeout":{"type":"number","minimum":0},"scheme":{"description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.","enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"default":"http"},"checks":{"type":"object","properties":{"passive":{"type":"object","properties":{"type":{"type":"string","enum":["http","https","tcp"],"default":"http"},"healthy":{"type":"object","properties":{"successes":{"type":"integer","default":5,"maximum":254,"minimum":0},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]}}},"unhealthy":{"type":"object","properties":{"http_failures":{"type":"integer","default":5,"maximum":254,"minimum":0},"tcp_failures":{"type":"integer","default":2,"maximum":254,"minimum":0},"timeouts":{"type":"integer","default":7,"maximum":254,"minimum":0},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[429,500,503]}}}}},"active":{"type":"object","properties":{"concurrency":{"type":"integer","default":10},"http_path":{"type":"string","default":"/"},"https_verify_certificate":{"type":"boolean","default":true},"unhealthy":{"type":"object","properties":{"interval":{"type":"integer","default":1,"minimum":1},"http_failures":{"type":"integer","default":5,"maximum":254,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[429,404,500,501,502,503,504,505]},"timeouts":{"type":"integer","default":3,"maximum":254,"minimum":1},"tcp_failures":{"type":"integer","default":2,"maximum":254,"minimum":1}}},"timeout":{"type":"number","default":1},"port":{"type":"integer","maximum":65535,"minimum":1},"req_headers":{"type":"array","items":{"type":"string","uniqueItems":true},"minItems":1},"type":{"type":"string","enum":["http","https","tcp"],"default":"http"},"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"healthy":{"type":"object","properties":{"interval":{"type":"integer","default":1,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[200,302]},"successes":{"type":"integer","default":2,"maximum":254,"minimum":1}}}}}},"additionalProperties":false,"anyOf":[{"required":["active"]},{"required":["active","passive"]}]},"hash_on":{"type":"string","enum":["vars","header","cookie","consumer","vars_combinations"],"default":"vars"},"pass_host":{"type":"string","description":"mod of host passing","enum":["pass","node","rewrite"],"default":"pass"},"upstream_host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"name":{"type":"string","minLength":1,"maxLength":100},"discovery_type":{"type":"string","description":"discovery type"},"discovery_args":{"type":"object","properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}}},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"service_name":{"type":"string","minLength":1,"maxLength":256},"keepalive_pool":{"type":"object","properties":{"size":{"type":"integer","minimum":1,"default":320},"requests":{"type":"integer","minimum":1,"default":1000},"idle_timeout":{"type":"number","minimum":0,"default":60}}},"timeout":{"type":"object","properties":{"connect":{"type":"number","exclusiveMinimum":0},"send":{"type":"number","exclusiveMinimum":0},"read":{"type":"number","exclusiveMinimum":0}},"required":["connect","send","read"]},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"desc":{"type":"string","maxLength":256},"tls":{"type":"object","properties":{"client_key":{"type":"string","minLength":128,"maxLength":65536},"client_cert_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"client_cert":{"type":"string","minLength":128,"maxLength":65536},"verify":{"type":"boolean","description":"Turn on server certificate verification, currently only kafka upstream is supported","default":false}},"dependencies":{"client_key":{"required":["client_cert"]},"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_cert":{"required":["client_key"]}}},"nodes":{"anyOf":[{"type":"object","patternProperties":{".*":{"type":"integer","description":"weight of node","minimum":0}}},{"type":"array","items":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of node","default":0},"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"weight":{"type":"integer","description":"weight of node","minimum":0},"port":{"type":"integer","description":"port of node","maximum":65535,"minimum":1},"metadata":{"type":"object","description":"metadata of node"}},"required":["host","weight"]}}]},"update_time":{"type":"integer"},"type":{"type":"string","description":"algorithms of load balancing","default":"roundrobin"}},"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"additionalProperties":false},"service":{"type":"object","properties":{"script":{"type":"string","minLength":10,"maxLength":102400},"update_time":{"type":"integer"},"enable_websocket":{"type":"boolean","description":"enable websocket for request"},"hosts":{"type":"array","uniqueItems":true,"items":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"minItems":1},"plugins":{"type":"object"},"create_time":{"type":"integer"},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"desc":{"type":"string","maxLength":256},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"upstream_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"upstream":{"type":"object","properties":{"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"create_time":{"type":"integer"},"retries":{"type":"integer","minimum":0},"retry_timeout":{"type":"number","minimum":0},"scheme":{"description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.","enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"default":"http"},"checks":{"type":"object","properties":{"passive":{"type":"object","properties":{"type":{"type":"string","enum":["http","https","tcp"],"default":"http"},"healthy":{"type":"object","properties":{"successes":{"type":"integer","default":5,"maximum":254,"minimum":0},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]}}},"unhealthy":{"type":"object","properties":{"http_failures":{"type":"integer","default":5,"maximum":254,"minimum":0},"tcp_failures":{"type":"integer","default":2,"maximum":254,"minimum":0},"timeouts":{"type":"integer","default":7,"maximum":254,"minimum":0},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[429,500,503]}}}}},"active":{"type":"object","properties":{"concurrency":{"type":"integer","default":10},"http_path":{"type":"string","default":"/"},"https_verify_certificate":{"type":"boolean","default":true},"unhealthy":{"type":"object","properties":{"interval":{"type":"integer","default":1,"minimum":1},"http_failures":{"type":"integer","default":5,"maximum":254,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[429,404,500,501,502,503,504,505]},"timeouts":{"type":"integer","default":3,"maximum":254,"minimum":1},"tcp_failures":{"type":"integer","default":2,"maximum":254,"minimum":1}}},"timeout":{"type":"number","default":1},"port":{"type":"integer","maximum":65535,"minimum":1},"req_headers":{"type":"array","items":{"type":"string","uniqueItems":true},"minItems":1},"type":{"type":"string","enum":["http","https","tcp"],"default":"http"},"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"healthy":{"type":"object","properties":{"interval":{"type":"integer","default":1,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[200,302]},"successes":{"type":"integer","default":2,"maximum":254,"minimum":1}}}}}},"additionalProperties":false,"anyOf":[{"required":["active"]},{"required":["active","passive"]}]},"hash_on":{"type":"string","enum":["vars","header","cookie","consumer","vars_combinations"],"default":"vars"},"pass_host":{"type":"string","description":"mod of host passing","enum":["pass","node","rewrite"],"default":"pass"},"upstream_host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"name":{"type":"string","minLength":1,"maxLength":100},"discovery_type":{"type":"string","description":"discovery type"},"discovery_args":{"type":"object","properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}}},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"service_name":{"type":"string","minLength":1,"maxLength":256},"keepalive_pool":{"type":"object","properties":{"size":{"type":"integer","minimum":1,"default":320},"requests":{"type":"integer","minimum":1,"default":1000},"idle_timeout":{"type":"number","minimum":0,"default":60}}},"timeout":{"type":"object","properties":{"connect":{"type":"number","exclusiveMinimum":0},"send":{"type":"number","exclusiveMinimum":0},"read":{"type":"number","exclusiveMinimum":0}},"required":["connect","send","read"]},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"desc":{"type":"string","maxLength":256},"tls":{"type":"object","properties":{"client_key":{"type":"string","minLength":128,"maxLength":65536},"client_cert_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"client_cert":{"type":"string","minLength":128,"maxLength":65536},"verify":{"type":"boolean","description":"Turn on server certificate verification, currently only kafka upstream is supported","default":false}},"dependencies":{"client_key":{"required":["client_cert"]},"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_cert":{"required":["client_key"]}}},"nodes":{"anyOf":[{"type":"object","patternProperties":{".*":{"type":"integer","description":"weight of node","minimum":0}}},{"type":"array","items":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of node","default":0},"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"weight":{"type":"integer","description":"weight of node","minimum":0},"port":{"type":"integer","description":"port of node","maximum":65535,"minimum":1},"metadata":{"type":"object","description":"metadata of node"}},"required":["host","weight"]}}]},"update_time":{"type":"integer"},"type":{"type":"string","description":"algorithms of load balancing","default":"roundrobin"}},"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"additionalProperties":false},"name":{"type":"string","minLength":1,"maxLength":100}},"additionalProperties":false}},"plugins":{"body-transformer":{"priority":1080,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"response":{"type":"object","properties":{"input_format":{"type":"string","enum":["xml","json","encoded","args","plain","multipart"]},"template":{"type":"string"},"template_is_base64":{"type":"boolean"}},"required":["template"]},"request":{"type":"object","properties":{"input_format":{"type":"string","enum":["xml","json","encoded","args","plain","multipart"]},"template":{"type":"string"},"template_is_base64":{"type":"boolean"}},"required":["template"]}},"$comment":"this is a mark for our injected plugin schema","anyOf":[{"required":["request"]},{"required":["response"]},{"required":["request","response"]}]}},"ai-prompt-template":{"priority":1071,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"templates":{"type":"array","items":{"type":"object","properties":{"template":{"type":"object","properties":{"model":{"type":"string","minLength":1},"messages":{"type":"array","items":{"required":["role","content"],"properties":{"role":{"type":"string","enum":["system","user","assistant"]},"content":{"type":"string","minLength":1}}},"minItems":1}}},"name":{"type":"string","minLength":1}},"required":["name","template"]},"minItems":1}},"$comment":"this is a mark for our injected plugin schema","required":["templates"]}},"ai-prompt-decorator":{"priority":1070,"version":0.1,"schema":{"type":"object","properties":{"prepend":{"type":"array","items":{"required":["role","content"],"properties":{"role":{"type":"string","enum":["system","user","assistant"]},"content":{"type":"string","minLength":1}}}},"append":{"type":"array","items":{"required":["role","content"],"properties":{"role":{"type":"string","enum":["system","user","assistant"]},"content":{"type":"string","minLength":1}}}},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema","anyOf":[{"required":["prepend"]},{"required":["append"]},{"required":["append","prepend"]}]}},"ai-prompt-guard":{"priority":1072,"version":0.1,"schema":{"type":"object","properties":{"match_all_roles":{"type":"boolean","default":false},"match_all_conversation_history":{"type":"boolean","default":false},"allow_patterns":{"type":"array","items":{"type":"string"},"default":{}},"deny_patterns":{"type":"array","items":{"type":"string"},"default":{}},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema"}},"ai-rag":{"priority":1060,"version":0.1,"schema":{"type":"object","properties":{"type":"object","embeddings_provider":{"type":"object","properties":{"azure_openai":{"type":"object","properties":{"api_key":{"type":"string"},"endpoint":{"type":"string"}},"required":["endpoint","api_key"]}},"maxProperties":1,"required":["azure_openai"]},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"vector_search_provider":{"type":"object","properties":{"azure_ai_search":{"type":"object","properties":{"api_key":{"type":"string"},"endpoint":{"type":"string"}},"required":["endpoint","api_key"]}},"maxProperties":1,"required":["azure_ai_search"]}},"$comment":"this is a mark for our injected plugin schema","required":["embeddings_provider","vector_search_provider"]}},"ai-rate-limiting":{"priority":1030,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"rejected_msg":{"type":"string","minLength":1},"rejected_code":{"type":"integer","default":503,"maximum":599,"minimum":200},"limit":{"type":"integer","exclusiveMinimum":0},"instances":{"type":"array","items":{"type":"object","properties":{"time_window":{"type":"integer","minimum":1},"limit":{"type":"integer","minimum":1},"name":{"type":"string"}},"required":["name","limit","time_window"]},"minItems":1},"time_window":{"type":"integer","exclusiveMinimum":0},"show_limit_quota_header":{"type":"boolean","default":true},"limit_strategy":{"type":"string","description":"The strategy to limit the tokens","enum":["total_tokens","prompt_tokens","completion_tokens"],"default":"total_tokens"}},"$comment":"this is a mark for our injected plugin schema","dependencies":{"limit":["time_window"],"time_window":["limit"]},"anyOf":[{"required":["limit","time_window"]},{"required":["instances"]}]}},"ai-proxy-multi":{"priority":1041,"version":0.5,"schema":{"type":"object","properties":{"keepalive_pool":{"type":"integer","default":30,"minimum":1},"ssl_verify":{"type":"boolean","default":true},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"balancer":{"type":"object","properties":{"algorithm":{"type":"string","enum":["chash","roundrobin"]},"hash_on":{"type":"string","enum":["vars","header","cookie","consumer","vars_combinations"],"default":"vars"},"key":{"type":"string","description":"the key of chash for dynamic load balancing"}},"default":{"algorithm":"roundrobin"}},"instances":{"type":"array","items":{"type":"object","properties":{"priority":{"type":"integer","description":"Priority of the provider for load balancing","default":0},"override":{"type":"object","properties":{"endpoint":{"type":"string","description":"To be specified to override the endpoint of the AI Instance"}}},"weight":{"type":"integer","minimum":0},"options":{"type":"object","description":"Key/value settings for the model","additionalProperties":true,"properties":{"model":{"type":"string","description":"Model to execute."}}},"auth":{"type":"object","additionalProperties":false,"patternProperties":{"query":{"type":"object","patternProperties":{"^[a-zA-Z0-9._-]+$":{"type":"string"}}},"header":{"type":"object","patternProperties":{"^[a-zA-Z0-9._-]+$":{"type":"string"}}}}},"provider":{"type":"string","description":"Type of the AI service instance.","enum":["openai","deepseek","openai-compatible"]},"name":{"type":"string","description":"Name of the AI service instance.","minLength":1,"maxLength":100}},"required":["name","provider","auth","weight"]},"minItems":1},"keepalive":{"type":"boolean","default":true},"fallback_strategy":{"type":"string","enum":["instance_health_and_rate_limiting"],"default":"instance_health_and_rate_limiting"},"timeout":{"type":"integer","description":"timeout in milliseconds","default":30000,"minimum":1}},"$comment":"this is a mark for our injected plugin schema","required":["instances"]}},"ai-proxy":{"priority":1040,"version":0.5,"schema":{"type":"object","properties":{"override":{"type":"object","properties":{"endpoint":{"type":"string","description":"To be specified to override the endpoint of the AI Instance"}}},"timeout":{"type":"integer","description":"timeout in milliseconds","default":30000,"minimum":1},"provider":{"type":"string","description":"Type of the AI service instance.","enum":["openai","deepseek","openai-compatible"]},"options":{"type":"object","description":"Key/value settings for the model","additionalProperties":true,"properties":{"model":{"type":"string","description":"Model to execute."}}},"ssl_verify":{"type":"boolean","default":true},"keepalive":{"type":"boolean","default":true},"auth":{"type":"object","additionalProperties":false,"patternProperties":{"query":{"type":"object","patternProperties":{"^[a-zA-Z0-9._-]+$":{"type":"string"}}},"header":{"type":"object","patternProperties":{"^[a-zA-Z0-9._-]+$":{"type":"string"}}}}},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"keepalive_pool":{"type":"integer","default":30,"minimum":1}},"$comment":"this is a mark for our injected plugin schema","required":["provider","auth"]}},"ai-aws-content-moderation":{"priority":1050,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"moderation_categories":{"type":"object","additionalProperties":false,"patternProperties":{"^(PROFANITY|HATE_SPEECH|INSULT|HARASSMENT_OR_ABUSE|SEXUAL|VIOLENCE_OR_THREAT)$":{"type":"number","maximum":1,"minimum":0}}},"comprehend":{"type":"object","properties":{"ssl_verify":{"type":"boolean","default":true},"endpoint":{"type":"string","pattern":"^https?://"},"secret_access_key":{"type":"string"},"region":{"type":"string"},"access_key_id":{"type":"string"}},"required":["access_key_id","secret_access_key","region"]},"moderation_threshold":{"type":"number","default":0.5,"maximum":1,"minimum":0}},"$comment":"this is a mark for our injected plugin schema","required":["comprehend"]}},"proxy-mirror":{"priority":1010,"version":0.1,"schema":{"type":"object","properties":{"path":{"type":"string","pattern":"^/[^?&]+$"},"host":{"type":"string","pattern":"^(http(s)?|grpc(s)?):\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?$"},"sample_ratio":{"type":"number","default":1,"maximum":1,"minimum":1e-05},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"path_concat_mode":{"type":"string","description":"the concatenation mode for custom path","enum":["replace","prefix"],"default":"replace"}},"$comment":"this is a mark for our injected plugin schema","required":["host"]}},"proxy-rewrite":{"priority":1008,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"host":{"type":"string","description":"new host for upstream","pattern":"^[0-9a-zA-Z-.]+(:\\d{1,5})?$"},"use_real_request_uri_unsafe":{"type":"boolean","description":"use real_request_uri instead, THIS IS VERY UNSAFE.","default":false},"uri":{"type":"string","description":"new uri for upstream","pattern":"^\\/.*","minLength":1,"maxLength":4096},"regex_uri":{"type":"array","description":"new uri that substitute from client uri for upstream, lower priority than uri property","items":{"type":"string","description":"regex uri"},"minItems":2},"method":{"type":"string","description":"proxy route method","enum":["UNLOCK","PATCH","TRACE","GET","HEAD","POST","PUT","DELETE","MKCOL","COPY","MOVE","OPTIONS","PROPFIND","LOCK"]},"headers":{"oneOf":[{"type":"object","properties":{"remove":{"type":"array","items":{"type":"string","pattern":"^[^:]+$"},"minItems":1},"add":{"type":"object","minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}}},"set":{"type":"object","minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}}}},"additionalProperties":false,"minProperties":1},{"type":"object","minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}}}],"description":"new headers for request"}},"$comment":"this is a mark for our injected plugin schema","minProperties":1}},"workflow":{"priority":1006,"version":0.1,"schema":{"type":"object","properties":{"rules":{"type":"array","items":{"type":"object","properties":{"actions":{"type":"array","items":{"type":"array","minItems":1}},"case":{"type":"array","items":{"anyOf":[{"type":"array"},{"type":"string"}]},"minItems":1}},"required":["actions"]}},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema","required":["rules"]}},"api-breaker":{"priority":1005,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"break_response_code":{"type":"integer","maximum":599,"minimum":200},"break_response_body":{"type":"string"},"break_response_headers":{"type":"array","items":{"type":"object","properties":{"key":{"type":"string","minLength":1},"value":{"type":"string","minLength":1}},"required":["key","value"]}},"max_breaker_sec":{"type":"integer","default":300,"minimum":3},"healthy":{"type":"object","properties":{"successes":{"type":"integer","default":3,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":499,"minimum":200},"default":[200]}},"default":{"successes":3,"http_statuses":[200]}},"unhealthy":{"type":"object","properties":{"failures":{"type":"integer","default":3,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":500},"default":[500]}},"default":{"failures":3,"http_statuses":[500]}}},"$comment":"this is a mark for our injected plugin schema","required":["break_response_code"]}},"limit-conn":{"priority":1003,"version":0.1,"schema":{"type":"object","properties":{"key":{"type":"string"},"rejected_code":{"type":"integer","default":503,"maximum":599,"minimum":200},"rejected_msg":{"type":"string","minLength":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"burst":{"type":"integer","minimum":0},"default_conn_delay":{"type":"number","exclusiveMinimum":0},"only_use_default_delay":{"type":"boolean","default":false},"key_type":{"type":"string","enum":["var","var_combination"],"default":"var"},"policy":{"type":"string","enum":["redis","redis-cluster","local"],"default":"local"},"conn":{"type":"integer","exclusiveMinimum":0},"allow_degradation":{"type":"boolean","default":false}},"if":{"properties":{"policy":{"enum":["redis"]}}},"required":["conn","burst","default_conn_delay","key"],"$comment":"this is a mark for our injected plugin schema","else":{"if":{"properties":{"policy":{"enum":["redis-cluster"]}}},"then":{"required":["redis_cluster_nodes","redis_cluster_name"],"properties":{"redis_cluster_nodes":{"type":"array","items":{"type":"string","minLength":2,"maxLength":100},"minItems":1},"redis_cluster_name":{"type":"string"},"redis_cluster_ssl":{"type":"boolean","default":false},"redis_password":{"type":"string","minLength":0},"redis_cluster_ssl_verify":{"type":"boolean","default":false},"redis_timeout":{"type":"integer","default":1000,"minimum":1}}}},"then":{"required":["redis_host"],"properties":{"redis_ssl":{"type":"boolean","default":false},"redis_ssl_verify":{"type":"boolean","default":false},"redis_host":{"type":"string","minLength":2},"redis_port":{"type":"integer","default":6379,"minimum":1},"redis_username":{"type":"string","minLength":1},"redis_password":{"type":"string","minLength":0},"redis_database":{"type":"integer","default":0,"minimum":0},"redis_timeout":{"type":"integer","default":1000,"minimum":1}}}}},"limit-count":{"priority":1002,"version":0.5,"schema":{"type":"object","properties":{"key":{"type":"string","default":"remote_addr"},"rejected_code":{"type":"integer","default":503,"maximum":599,"minimum":200},"rejected_msg":{"type":"string","minLength":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"show_limit_quota_header":{"type":"boolean","default":true},"count":{"type":"integer","exclusiveMinimum":0},"group":{"type":"string"},"key_type":{"type":"string","enum":["var","var_combination","constant"],"default":"var"},"time_window":{"type":"integer","exclusiveMinimum":0},"policy":{"type":"string","enum":["local","redis","redis-cluster"],"default":"local"},"allow_degradation":{"type":"boolean","default":false}},"if":{"properties":{"policy":{"enum":["redis"]}}},"required":["count","time_window"],"$comment":"this is a mark for our injected plugin schema","else":{"if":{"properties":{"policy":{"enum":["redis-cluster"]}}},"then":{"required":["redis_cluster_nodes","redis_cluster_name"],"properties":{"redis_cluster_nodes":{"type":"array","items":{"type":"string","minLength":2,"maxLength":100},"minItems":1},"redis_cluster_name":{"type":"string"},"redis_cluster_ssl":{"type":"boolean","default":false},"redis_password":{"type":"string","minLength":0},"redis_cluster_ssl_verify":{"type":"boolean","default":false},"redis_timeout":{"type":"integer","default":1000,"minimum":1}}}},"then":{"required":["redis_host"],"properties":{"redis_ssl":{"type":"boolean","default":false},"redis_ssl_verify":{"type":"boolean","default":false},"redis_host":{"type":"string","minLength":2},"redis_port":{"type":"integer","default":6379,"minimum":1},"redis_username":{"type":"string","minLength":1},"redis_password":{"type":"string","minLength":0},"redis_database":{"type":"integer","default":0,"minimum":0},"redis_timeout":{"type":"integer","default":1000,"minimum":1}}}},"metadata_schema":{"type":"object","properties":{"limit_header":{"type":"string","default":"X-RateLimit-Limit"},"remaining_header":{"type":"string","default":"X-RateLimit-Remaining"},"reset_header":{"type":"string","default":"X-RateLimit-Reset"}}}},"limit-req":{"priority":1001,"version":0.1,"schema":{"type":"object","properties":{"key":{"type":"string"},"rejected_code":{"type":"integer","default":503,"maximum":599,"minimum":200},"rejected_msg":{"type":"string","minLength":1},"burst":{"type":"number","minimum":0},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"rate":{"type":"number","exclusiveMinimum":0},"nodelay":{"type":"boolean","default":false},"key_type":{"type":"string","enum":["var","var_combination"],"default":"var"},"policy":{"type":"string","enum":["redis","redis-cluster","local"],"default":"local"},"allow_degradation":{"type":"boolean","default":false}},"if":{"properties":{"policy":{"enum":["redis"]}}},"required":["rate","burst","key"],"$comment":"this is a mark for our injected plugin schema","else":{"if":{"properties":{"policy":{"enum":["redis-cluster"]}}},"then":{"required":["redis_cluster_nodes","redis_cluster_name"],"properties":{"redis_cluster_nodes":{"type":"array","items":{"type":"string","minLength":2,"maxLength":100},"minItems":1},"redis_cluster_name":{"type":"string"},"redis_cluster_ssl":{"type":"boolean","default":false},"redis_password":{"type":"string","minLength":0},"redis_cluster_ssl_verify":{"type":"boolean","default":false},"redis_timeout":{"type":"integer","default":1000,"minimum":1}}}},"then":{"required":["redis_host"],"properties":{"redis_ssl":{"type":"boolean","default":false},"redis_ssl_verify":{"type":"boolean","default":false},"redis_host":{"type":"string","minLength":2},"redis_port":{"type":"integer","default":6379,"minimum":1},"redis_username":{"type":"string","minLength":1},"redis_password":{"type":"string","minLength":0},"redis_database":{"type":"integer","default":0,"minimum":0},"redis_timeout":{"type":"integer","default":1000,"minimum":1}}}}},"public-api":{"priority":501,"version":0.1,"schema":{"type":"object","properties":{"uri":{"type":"string"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema"}},"prometheus":{"priority":500,"version":0.2,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"prefer_name":{"type":"boolean","default":false}},"$comment":"this is a mark for our injected plugin schema"}},"datadog":{"priority":495,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"retry_delay":{"type":"integer","minimum":0,"default":1},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"prefer_name":{"type":"boolean","default":true},"buffer_duration":{"type":"integer","minimum":1,"default":60},"name":{"type":"string","default":"datadog"}},"$comment":"this is a mark for our injected plugin schema"},"metadata_schema":{"type":"object","properties":{"port":{"type":"integer","default":8125,"minimum":0},"namespace":{"type":"string","default":"apisix"},"host":{"type":"string","default":"127.0.0.1"},"constant_tags":{"type":"array","items":{"type":"string"},"default":["source:apisix"]}}}},"loki-logger":{"priority":414,"version":0.1,"schema":{"type":"object","properties":{"include_req_body":{"type":"boolean","default":false},"keepalive_timeout":{"type":"integer","description":"keepalive timeout in milliseconds","default":60000,"minimum":1000},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"name":{"type":"string","default":"loki logger"},"endpoint_uri":{"type":"string","minLength":1,"default":"/loki/api/v1/push"},"keepalive":{"type":"boolean","default":true},"tenant_id":{"type":"string","default":"fake"},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_labels":{"type":"object","default":{"job":"apisix"},"patternProperties":{".*":{"type":"string","minLength":1}}},"log_format":{"type":"object"},"timeout":{"type":"integer","description":"timeout in milliseconds","maximum":60000,"minimum":1,"default":3000},"include_resp_body":{"type":"boolean","default":false},"keepalive_pool":{"type":"integer","default":5,"minimum":1},"ssl_verify":{"type":"boolean","default":false},"endpoint_addrs":{"type":"array","items":{"type":"string","pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?"},"minItems":1},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1}},"$comment":"this is a mark for our injected plugin schema","required":["endpoint_addrs"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"elasticsearch-logger":{"priority":413,"version":0.1,"schema":{"type":"object","properties":{"timeout":{"type":"integer","default":10,"minimum":1},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"field":{"type":"object","properties":{"type":{"type":"string"},"index":{"type":"string"}},"required":["index"]},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"name":{"type":"string","default":"elasticsearch-logger"},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_format":{"type":"object"},"endpoint_addr":{"type":"string","pattern":"[^/]$"},"include_resp_body":{"type":"boolean","default":false},"endpoint_addrs":{"type":"array","items":{"type":"string","pattern":"[^/]$"},"minItems":1},"ssl_verify":{"type":"boolean","default":true},"auth":{"type":"object","properties":{"password":{"type":"string","minLength":1},"username":{"type":"string","minLength":1}},"required":["username","password"]},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"include_req_body":{"type":"boolean","default":false}},"oneOf":[{"required":["endpoint_addr","field"]},{"required":["endpoint_addrs","field"]}],"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["auth.password"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"echo":{"priority":412,"version":0.1,"schema":{"type":"object","properties":{"before_body":{"type":"string","description":"body before the filter phase."},"after_body":{"type":"string","description":"body after the modification of filter phase."},"body":{"type":"string","description":"body to replace upstream response."},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"headers":{"type":"object","description":"new headers for response","minProperties":1}},"$comment":"this is a mark for our injected plugin schema","anyOf":[{"required":["before_body"]},{"required":["body"]},{"required":["after_body"]}],"minProperties":1}},"loggly":{"priority":411,"version":0.1,"schema":{"type":"object","properties":{"customer_token":{"type":"string"},"include_req_body":{"type":"boolean","default":false},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"name":{"type":"string","default":"loggly"},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_format":{"type":"object"},"include_resp_body":{"type":"boolean","default":false},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"severity_map":{"type":"object","description":"upstream response code vs syslog severity mapping","additionalProperties":false,"patternProperties":{"^[1-5][0-9]{2}$":{"type":"string","description":"keys are HTTP status code, values are severity","enum":["EMEGR","emegr","WARNING","warning","DEBUG","debug","ALERT","alert","CRIT","crit","ERR","err","INFO","info","NOTICE","notice"]}}},"tags":{"type":"array","minItems":1,"items":{"type":"string","pattern":"^(?!tag=)[ -~]*"},"default":["apisix"]},"ssl_verify":{"type":"boolean","default":true},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"severity":{"type":"string","description":"base severity log level","enum":["EMEGR","emegr","WARNING","warning","DEBUG","debug","ALERT","alert","CRIT","crit","ERR","err","INFO","info","NOTICE","notice"],"default":"INFO"}},"$comment":"this is a mark for our injected plugin schema","required":["customer_token"]},"metadata_schema":{"type":"object","properties":{"host":{"type":"string","default":"logs-01.loggly.com"},"timeout":{"type":"integer","default":5000,"minimum":1},"protocol":{"type":"string","enum":["syslog","http","https"],"default":"syslog"},"port":{"type":"integer","default":514},"log_format":{"type":"object"}}}},"http-logger":{"priority":410,"version":0.1,"schema":{"type":"object","properties":{"include_req_body":{"type":"boolean","default":false},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"name":{"type":"string","default":"http logger"},"auth_header":{"type":"string"},"concat_method":{"type":"string","enum":["json","new_line"],"default":"json"},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_format":{"type":"object"},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"uri":{"type":"string","pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?"},"ssl_verify":{"type":"boolean","default":false},"timeout":{"type":"integer","default":3,"minimum":1},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"include_resp_body":{"type":"boolean","default":false}},"$comment":"this is a mark for our injected plugin schema","required":["uri"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"splunk-hec-logging":{"priority":409,"version":0.1,"schema":{"type":"object","properties":{"log_format":{"type":"object"},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"ssl_verify":{"type":"boolean","default":true},"endpoint":{"type":"object","properties":{"token":{"type":"string"},"uri":{"type":"string","pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?"},"channel":{"type":"string"},"keepalive_timeout":{"type":"integer","description":"keepalive timeout in milliseconds","default":60000,"minimum":1000},"timeout":{"type":"integer","default":10,"minimum":1}},"required":["uri","token"]},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"name":{"type":"string","default":"splunk-hec-logging"}},"$comment":"this is a mark for our injected plugin schema","required":["endpoint"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"skywalking-logger":{"priority":408,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"service_instance_name":{"type":"string","default":"APISIX Instance Name"},"service_name":{"type":"string","default":"APISIX"},"include_req_body":{"type":"boolean","default":false},"log_format":{"type":"object"},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"include_resp_body":{"type":"boolean","default":false},"endpoint_addr":{"type":"string","pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?"},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"timeout":{"type":"integer","default":3,"minimum":1},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"name":{"type":"string","default":"skywalking logger"}},"$comment":"this is a mark for our injected plugin schema","required":["endpoint_addr"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"google-cloud-logging":{"priority":407,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"log_format":{"type":"object"},"log_id":{"type":"string","default":"apisix.apache.org%2Flogs"},"auth_config":{"type":"object","properties":{"client_email":{"type":"string"},"private_key":{"type":"string"},"project_id":{"type":"string"},"token_uri":{"type":"string","default":"https://oauth2.googleapis.com/token"},"scope":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"string","description":"Google OAuth2 Authorization Scopes"},"default":["https://www.googleapis.com/auth/logging.read","https://www.googleapis.com/auth/logging.write","https://www.googleapis.com/auth/logging.admin","https://www.googleapis.com/auth/cloud-platform"]},"entries_uri":{"type":"string","default":"https://logging.googleapis.com/v2/entries:write"},"scopes":{"type":"array","uniqueItems":true,"items":{"type":"string","description":"Google OAuth2 Authorization Scopes"},"minItems":1}},"required":["client_email","private_key","project_id","token_uri"]},"resource":{"type":"object","properties":{"type":{"type":"string"},"labels":{"type":"object"}},"required":["type"],"default":{"type":"global"}},"ssl_verify":{"type":"boolean","default":true},"auth_file":{"type":"string"},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"name":{"type":"string","default":"google-cloud-logging"}},"oneOf":[{"required":["auth_config"]},{"required":["auth_file"]}],"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["auth_config.private_key"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"sls-logger":{"priority":406,"version":0.1,"schema":{"type":"object","properties":{"access_key_id":{"type":"string"},"timeout":{"type":"integer","default":5000,"minimum":1},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"host":{"type":"string"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"name":{"type":"string","default":"sls-logger"},"project":{"type":"string"},"logstore":{"type":"string"},"access_key_secret":{"type":"string"},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_format":{"type":"object"},"port":{"type":"integer"},"include_resp_body":{"type":"boolean","default":false},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"include_req_body":{"type":"boolean","default":false}},"required":["host","port","project","logstore","access_key_id","access_key_secret"],"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["access_key_secret"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"tcp-logger":{"priority":405,"version":0.1,"schema":{"type":"object","properties":{"include_req_body":{"type":"boolean","default":false},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"host":{"type":"string"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"name":{"type":"string","default":"tcp logger"},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_format":{"type":"object"},"port":{"type":"integer","minimum":0},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"timeout":{"type":"integer","default":1000,"minimum":1},"tls_options":{"type":"string"},"tls":{"type":"boolean","default":false},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"include_resp_body":{"type":"boolean","default":false}},"$comment":"this is a mark for our injected plugin schema","required":["host","port"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"kafka-logger":{"priority":403,"version":0.1,"schema":{"type":"object","properties":{"key":{"type":"string"},"brokers":{"type":"array","uniqueItems":true,"items":{"type":"object","properties":{"sasl_config":{"type":"object","description":"sasl config","properties":{"user":{"type":"string","description":"user"},"mechanism":{"type":"string","enum":["PLAIN"],"default":"PLAIN"},"password":{"type":"string","description":"password"}},"required":["user","password"]},"host":{"type":"string","description":"the host of kafka broker"},"port":{"type":"integer","description":"the port of kafka broker","maximum":65535,"minimum":1}},"required":["host","port"]},"minItems":1},"producer_type":{"type":"string","enum":["async","sync"],"default":"async"},"required_acks":{"type":"integer","enum":[1,-1],"default":1},"cluster_name":{"type":"integer","default":1,"minimum":1},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"producer_batch_size":{"type":"integer","default":1048576,"minimum":0},"producer_max_buffering":{"type":"integer","default":50000,"minimum":1},"producer_time_linger":{"type":"integer","default":1,"minimum":1},"meta_refresh_interval":{"type":"integer","default":30,"minimum":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"name":{"type":"string","default":"kafka logger"},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"meta_format":{"type":"string","enum":["default","origin"],"default":"default"},"include_req_body":{"type":"boolean","default":false},"max_retry_count":{"type":"integer","minimum":0,"default":0},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_format":{"type":"object"},"timeout":{"type":"integer","default":3,"minimum":1},"broker_list":{"type":"object","minProperties":1,"patternProperties":{".*":{"type":"integer","description":"the port of kafka broker","maximum":65535,"minimum":1}}},"producer_batch_num":{"type":"integer","default":200,"minimum":1},"max_req_body_bytes":{"type":"integer","default":524288,"minimum":1},"kafka_topic":{"type":"string"},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_resp_body_bytes":{"type":"integer","default":524288,"minimum":1},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"include_resp_body":{"type":"boolean","default":false}},"oneOf":[{"required":["broker_list","kafka_topic"]},{"required":["brokers","kafka_topic"]}],"$comment":"this is a mark for our injected plugin schema"},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"rocketmq-logger":{"priority":402,"version":0.1,"schema":{"type":"object","properties":{"key":{"type":"string"},"access_key":{"type":"string","default":""},"topic":{"type":"string"},"include_req_body":{"type":"boolean","default":false},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"name":{"type":"string","default":"rocketmq logger"},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"timeout":{"type":"integer","default":3,"minimum":1},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_format":{"type":"object"},"use_tls":{"type":"boolean","default":false},"include_resp_body":{"type":"boolean","default":false},"max_retry_count":{"type":"integer","minimum":0,"default":0},"secret_key":{"type":"string","default":""},"tag":{"type":"string"},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"meta_format":{"type":"string","enum":["default","origin"],"default":"default"},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"nameserver_list":{"type":"array","items":{"type":"string"},"minItems":1}},"required":["nameserver_list","topic"],"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["secret_key"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"syslog":{"priority":401,"version":0.1,"schema":{"type":"object","properties":{"timeout":{"type":"integer","default":3000,"minimum":1},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"pool_size":{"type":"integer","default":5,"minimum":5},"host":{"type":"string"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"name":{"type":"string","default":"sys logger"},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"tls":{"type":"boolean","default":false},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_format":{"type":"object"},"port":{"type":"integer"},"include_resp_body":{"type":"boolean","default":false},"include_req_body":{"type":"boolean","default":false},"flush_limit":{"type":"integer","default":4096,"minimum":1},"drop_limit":{"type":"integer","default":1048576},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"sock_type":{"type":"string","enum":["tcp","udp"],"default":"tcp"}},"$comment":"this is a mark for our injected plugin schema","required":["host","port"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"udp-logger":{"priority":400,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"timeout":{"type":"integer","default":3,"minimum":1},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_format":{"type":"object"},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"include_resp_body":{"type":"boolean","default":false},"port":{"type":"integer","minimum":0},"include_req_body":{"type":"boolean","default":false},"host":{"type":"string"},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"name":{"type":"string","default":"udp logger"}},"$comment":"this is a mark for our injected plugin schema","required":["host","port"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"file-logger":{"priority":399,"version":0.1,"schema":{"type":"object","properties":{"path":{"type":"string"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"match":{"type":"array","maxItems":20,"items":{"type":"array"}},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"include_req_body":{"type":"boolean","default":false},"log_format":{"type":"object"},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"include_resp_body":{"type":"boolean","default":false}},"$comment":"this is a mark for our injected plugin schema","required":["path"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"clickhouse-logger":{"priority":398,"version":0.1,"schema":{"type":"object","properties":{"timeout":{"type":"integer","default":3,"minimum":1},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"password":{"type":"string","default":""},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"include_req_body":{"type":"boolean","default":false},"user":{"type":"string","default":""},"name":{"type":"string","default":"clickhouse-logger"},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_format":{"type":"object"},"database":{"type":"string","default":""},"include_resp_body":{"type":"boolean","default":false},"endpoint_addrs":{"type":"array","items":{"type":"string","pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?"},"minItems":1},"ssl_verify":{"type":"boolean","default":true},"endpoint_addr":{"type":"string","pattern":"^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?"},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"logtable":{"type":"string","default":""}},"oneOf":[{"required":["endpoint_addr","user","password","database","logtable"]},{"required":["endpoint_addrs","user","password","database","logtable"]}],"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["password"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"tencent-cloud-cls":{"priority":397,"version":0.1,"schema":{"type":"object","properties":{"include_req_body":{"type":"boolean","default":false},"include_req_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"sample_ratio":{"type":"number","default":1,"maximum":1,"minimum":1e-05},"cls_host":{"type":"string"},"name":{"type":"string","default":"tencent-cloud-cls"},"secret_id":{"type":"string"},"global_tag":{"type":"object"},"include_resp_body_expr":{"type":"array","items":{"type":"array"},"minItems":1},"log_format":{"type":"object"},"include_resp_body":{"type":"boolean","default":false},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"secret_key":{"type":"string"},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"max_retry_count":{"type":"integer","minimum":0,"default":0},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"cls_topic":{"type":"string"}},"required":["cls_host","cls_topic","secret_id","secret_key"],"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["secret_key"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}},"inspect":{"priority":200,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema"}},"example-plugin":{"priority":0,"version":0.1,"schema":{"type":"object","properties":{"s":{"type":"string"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"t":{"type":"array","minItems":1},"i":{"type":"number","minimum":0},"port":{"type":"integer"},"ip":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema","required":["i"]},"metadata_schema":{"type":"object","properties":{"ikey":{"type":"number","minimum":0},"skey":{"type":"string"}},"required":["ikey","skey"]}},"aws-lambda":{"priority":-1899,"version":0.1,"schema":{"type":"object","properties":{"keepalive_pool":{"type":"integer","default":5,"minimum":1},"authorization":{"type":"object","properties":{"iam":{"type":"object","properties":{"accesskey":{"type":"string","description":"access key id from from aws iam console"},"aws_region":{"type":"string","description":"the aws region that is receiving the request","default":"us-east-1"},"secretkey":{"type":"string","description":"secret access key from from aws iam console"},"service":{"type":"string","description":"the service that is receiving the request","default":"execute-api"}},"required":["accesskey","secretkey"]},"apikey":{"type":"string"}}},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"keepalive":{"type":"boolean","default":true},"timeout":{"type":"integer","default":3000,"minimum":100},"ssl_verify":{"type":"boolean","default":true},"keepalive_timeout":{"type":"integer","default":60000,"minimum":1000},"function_uri":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema","required":["function_uri"]}},"azure-functions":{"priority":-1900,"version":0.1,"schema":{"type":"object","properties":{"keepalive_pool":{"type":"integer","default":5,"minimum":1},"authorization":{"type":"object","properties":{"clientid":{"type":"string"},"apikey":{"type":"string"}}},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"keepalive":{"type":"boolean","default":true},"timeout":{"type":"integer","default":3000,"minimum":100},"ssl_verify":{"type":"boolean","default":true},"keepalive_timeout":{"type":"integer","default":60000,"minimum":1000},"function_uri":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema","required":["function_uri"]},"metadata_schema":{"type":"object","properties":{"master_clientid":{"type":"string","default":""},"master_apikey":{"type":"string","default":""}}}},"openwhisk":{"priority":-1901,"version":0.1,"schema":{"type":"object","properties":{"namespace":{"type":"string","pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z","maxLength":256},"timeout":{"type":"integer","description":"timeout in milliseconds","maximum":60000,"minimum":1,"default":3000},"action":{"type":"string","pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z","maxLength":256},"service_token":{"type":"string"},"api_host":{"type":"string"},"ssl_verify":{"type":"boolean","default":true},"keepalive_pool":{"type":"integer","default":5,"minimum":1},"keepalive":{"type":"boolean","default":true},"keepalive_timeout":{"type":"integer","default":60000,"minimum":1000},"result":{"type":"boolean","default":true},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"package":{"type":"string","pattern":"\\A([\\w]|[\\w][\\w@ .-]*[\\w@.-]+)\\z","maxLength":256}},"required":["api_host","service_token","namespace","action"],"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["service_token"]}},"redirect":{"priority":900,"version":0.1,"schema":{"type":"object","properties":{"encode_uri":{"type":"boolean","default":false},"append_query_string":{"type":"boolean","default":false},"uri":{"type":"string","minLength":2,"pattern":"(\\\\\\$[0-9a-zA-Z_]+)|\\$\\{([0-9a-zA-Z_]+)\\}|\\$([0-9a-zA-Z_]+)|(\\$|[^$\\\\]+)"},"ret_code":{"type":"integer","default":302,"minimum":200},"regex_uri":{"type":"array","description":"params for generating new uri that substitute from client uri, first param is regular expression, the second one is uri template","maxItems":2,"items":{"type":"string","description":"regex uri"},"minItems":2},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"http_to_https":{"type":"boolean"}},"oneOf":[{"required":["uri"]},{"required":["regex_uri"]},{"required":["http_to_https"]}],"$comment":"this is a mark for our injected plugin schema"}},"serverless-post-function":{"priority":-2000,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"phase":{"type":"string","enum":["rewrite","access","header_filter","body_filter","log","before_proxy"],"default":"access"},"functions":{"type":"array","items":{"type":"string"},"minItems":1}},"$comment":"this is a mark for our injected plugin schema","required":["functions"]}},"ext-plugin-post-req":{"priority":-3000,"version":0.1,"schema":{"type":"object","properties":{"conf":{"type":"array","items":{"type":"object","properties":{"value":{"type":"string"},"name":{"type":"string","minLength":1,"maxLength":128}},"required":["name","value"]},"minItems":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"allow_degradation":{"type":"boolean","default":false}},"$comment":"this is a mark for our injected plugin schema"}},"ext-plugin-post-resp":{"priority":-4000,"version":0.1,"schema":{"type":"object","properties":{"conf":{"type":"array","items":{"type":"object","properties":{"value":{"type":"string"},"name":{"type":"string","minLength":1,"maxLength":128}},"required":["name","value"]},"minItems":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"allow_degradation":{"type":"boolean","default":false}},"$comment":"this is a mark for our injected plugin schema"}},"gzip":{"priority":995,"version":0.1,"schema":{"type":"object","properties":{"http_version":{"enum":[1.1,1],"default":1.1},"buffers":{"type":"object","properties":{"size":{"type":"integer","default":4096,"minimum":1},"number":{"type":"integer","default":32,"minimum":1}},"default":{"size":4096,"number":32}},"types":{"anyOf":[{"type":"array","items":{"type":"string","minLength":1},"minItems":1},{"enum":["*"]}],"default":["text/html"]},"comp_level":{"type":"integer","default":1,"maximum":9,"minimum":1},"vary":{"type":"boolean"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"min_length":{"type":"integer","default":20,"minimum":1}},"$comment":"this is a mark for our injected plugin schema"}},"server-info":{"priority":990,"scope":"global","version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema"}},"traffic-split":{"priority":966,"version":0.1,"schema":{"type":"object","properties":{"rules":{"type":"array","items":{"type":"object","properties":{"weighted_upstreams":{"type":"array","maxItems":20,"minItems":1,"items":{"type":"object","properties":{"upstream_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"upstream":{"type":"object","properties":{"key":{"type":"string","description":"the key of chash for dynamic load balancing"},"create_time":{"type":"integer"},"retries":{"type":"integer","minimum":0},"retry_timeout":{"type":"number","minimum":0},"scheme":{"description":"The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.","enum":["grpc","grpcs","http","https","tcp","tls","udp","kafka"],"default":"http"},"checks":{"type":"object","properties":{"passive":{"type":"object","properties":{"type":{"type":"string","enum":["http","https","tcp"],"default":"http"},"healthy":{"type":"object","properties":{"successes":{"type":"integer","default":5,"maximum":254,"minimum":0},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[200,201,202,203,204,205,206,207,208,226,300,301,302,303,304,305,306,307,308]}}},"unhealthy":{"type":"object","properties":{"http_failures":{"type":"integer","default":5,"maximum":254,"minimum":0},"tcp_failures":{"type":"integer","default":2,"maximum":254,"minimum":0},"timeouts":{"type":"integer","default":7,"maximum":254,"minimum":0},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[429,500,503]}}}}},"active":{"type":"object","properties":{"concurrency":{"type":"integer","default":10},"http_path":{"type":"string","default":"/"},"https_verify_certificate":{"type":"boolean","default":true},"unhealthy":{"type":"object","properties":{"interval":{"type":"integer","default":1,"minimum":1},"http_failures":{"type":"integer","default":5,"maximum":254,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[429,404,500,501,502,503,504,505]},"timeouts":{"type":"integer","default":3,"maximum":254,"minimum":1},"tcp_failures":{"type":"integer","default":2,"maximum":254,"minimum":1}}},"timeout":{"type":"number","default":1},"port":{"type":"integer","maximum":65535,"minimum":1},"req_headers":{"type":"array","items":{"type":"string","uniqueItems":true},"minItems":1},"type":{"type":"string","enum":["http","https","tcp"],"default":"http"},"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"healthy":{"type":"object","properties":{"interval":{"type":"integer","default":1,"minimum":1},"http_statuses":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","maximum":599,"minimum":200},"default":[200,302]},"successes":{"type":"integer","default":2,"maximum":254,"minimum":1}}}}}},"additionalProperties":false,"anyOf":[{"required":["active"]},{"required":["active","passive"]}]},"hash_on":{"type":"string","enum":["vars","header","cookie","consumer","vars_combinations"],"default":"vars"},"pass_host":{"type":"string","description":"mod of host passing","enum":["pass","node","rewrite"],"default":"pass"},"upstream_host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"name":{"type":"string","minLength":1,"maxLength":100},"discovery_type":{"type":"string","description":"discovery type"},"discovery_args":{"type":"object","properties":{"namespace_id":{"type":"string","description":"namespace id"},"group_name":{"type":"string","description":"group name"}}},"id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"service_name":{"type":"string","minLength":1,"maxLength":256},"keepalive_pool":{"type":"object","properties":{"size":{"type":"integer","minimum":1,"default":320},"requests":{"type":"integer","minimum":1,"default":1000},"idle_timeout":{"type":"number","minimum":0,"default":60}}},"timeout":{"type":"object","properties":{"connect":{"type":"number","exclusiveMinimum":0},"send":{"type":"number","exclusiveMinimum":0},"read":{"type":"number","exclusiveMinimum":0}},"required":["connect","send","read"]},"labels":{"type":"object","description":"key/value pairs to specify attributes","patternProperties":{".*":{"type":"string","description":"value of label","pattern":"^\\S+$","minLength":1,"maxLength":256}}},"desc":{"type":"string","maxLength":256},"tls":{"type":"object","properties":{"client_key":{"type":"string","minLength":128,"maxLength":65536},"client_cert_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]},"client_cert":{"type":"string","minLength":128,"maxLength":65536},"verify":{"type":"boolean","description":"Turn on server certificate verification, currently only kafka upstream is supported","default":false}},"dependencies":{"client_key":{"required":["client_cert"]},"client_cert_id":{"not":{"required":["client_cert","client_key"]}},"client_cert":{"required":["client_key"]}}},"nodes":{"anyOf":[{"type":"object","patternProperties":{".*":{"type":"integer","description":"weight of node","minimum":0}}},{"type":"array","items":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of node","default":0},"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"weight":{"type":"integer","description":"weight of node","minimum":0},"port":{"type":"integer","description":"port of node","maximum":65535,"minimum":1},"metadata":{"type":"object","description":"metadata of node"}},"required":["host","weight"]}}]},"update_time":{"type":"integer"},"type":{"type":"string","description":"algorithms of load balancing","default":"roundrobin"}},"oneOf":[{"required":["nodes"]},{"required":["service_name","discovery_type"]}],"additionalProperties":false},"weight":{"type":"integer","description":"used to split traffic between differentupstreams for plugin configuration","minimum":0,"default":1}}},"default":[{"weight":1}]},"match":{"type":"array","items":{"type":"object","properties":{"vars":{"type":"array"}}}}}}},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema"}},"response-rewrite":{"priority":899,"version":0.1,"schema":{"type":"object","properties":{"status_code":{"type":"integer","description":"new status code for response","maximum":598,"minimum":200},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"vars":{"type":"array"},"filters":{"type":"array","description":"a group of filters that modify response bodyby replacing one specified string by another","items":{"type":"object","description":"filter that modifies response body","properties":{"regex":{"type":"string","description":"match pattern on response body","minLength":1},"scope":{"type":"string","description":"regex substitution range","enum":["once","global"],"default":"once"},"options":{"type":"string","description":"regex options","default":"jo"},"replace":{"type":"string","description":"regex substitution content"}},"required":["regex","replace"]},"minItems":1},"body":{"type":"string","description":"new body for response"},"body_base64":{"type":"boolean","description":"whether new body for response need base64 decode before return","default":false},"headers":{"anyOf":[{"type":"object","minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}}},{"properties":{"remove":{"type":"array","items":{"type":"string","pattern":"^[^:]+$"},"minItems":1},"add":{"type":"array","items":{"type":"string","pattern":"^[^:]+:[^:]*[^/]$"},"minItems":1},"set":{"type":"object","minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}}}}}],"description":"new headers for response"}},"$comment":"this is a mark for our injected plugin schema","dependencies":{"filters":{"not":{"required":["body"]}},"body":{"not":{"required":["filters"]}}}}},"degraphql":{"priority":509,"version":0.1,"schema":{"type":"object","properties":{"query":{"type":"string","minLength":1,"maxLength":1024},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"variables":{"type":"array","items":{"type":"string"},"minItems":1},"operation_name":{"type":"string","minLength":1,"maxLength":1024}},"$comment":"this is a mark for our injected plugin schema","required":["query"]}},"kafka-proxy":{"priority":508,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"sasl":{"type":"object","properties":{"password":{"type":"string"},"username":{"type":"string"}},"required":["username","password"]}},"encrypt_fields":["sasl.password"],"$comment":"this is a mark for our injected plugin schema"}},"grpc-transcode":{"priority":506,"version":0.1,"schema":{"type":"object","properties":{"status_detail_type":{"type":"string","description":"the message type of the grpc-status-details-bin's details part, if not given, the details part will not be decoded"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"show_status_in_body":{"type":"boolean","description":"show decoded grpc-status-details-bin in response body","default":false},"deadline":{"type":"number","description":"deadline for grpc, millisecond","default":0},"service":{"type":"string","description":"the grpc service name"},"pb_option":{"type":"array","minItems":1,"items":{"type":"string","anyOf":[{"type":"string","description":"enum as result","enum":["enum_as_name","enum_as_value"]},{"type":"string","description":"int64 as result","enum":["int64_as_number","int64_as_string","int64_as_hexstring"]},{"type":"string","description":"default values option","enum":["auto_default_values","no_default_values","use_default_values","use_default_metatable"]},{"type":"string","description":"hooks option","enum":["enable_hooks","disable_hooks"]}]},"default":["enum_as_name","int64_as_number","auto_default_values","disable_hooks"]},"method":{"type":"string","description":"the method name in the grpc service."},"proto_id":{"anyOf":[{"type":"string","pattern":"^[a-zA-Z0-9-_.]+$","minLength":1,"maxLength":64},{"type":"integer","minimum":1}]}},"required":["proto_id","service","method"],"$comment":"this is a mark for our injected plugin schema","additionalProperties":true}},"grpc-web":{"priority":505,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"cors_allow_headers":{"type":"string","description":"multiple header use ',' to split. default: content-type,x-grpc-web,x-user-agent.","default":"content-type,x-grpc-web,x-user-agent"}},"$comment":"this is a mark for our injected plugin schema"}},"cas-auth":{"priority":2597,"version":0.1,"schema":{"type":"object","properties":{"idp_uri":{"type":"string"},"cas_callback_uri":{"type":"string"},"logout_uri":{"type":"string"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema","required":["idp_uri","cas_callback_uri","logout_uri"]}},"http-dubbo":{"priority":504,"version":0.1,"schema":{"type":"object","properties":{"service_version":{"type":"string","pattern":"^\\d+\\.\\d+\\.\\d+","default":"0.0.0"},"service_name":{"type":"string","minLength":1},"method":{"type":"string","minLength":1},"serialization_header_key":{"type":"string"},"serialized":{"type":"boolean","default":false},"read_timeout":{"type":"number","default":6000},"send_timeout":{"type":"number","default":6000},"params_type_desc":{"type":"string","default":""},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"connect_timeout":{"type":"number","default":6000}},"$comment":"this is a mark for our injected plugin schema","required":["service_name","method"]}},"openfunction":{"priority":-1902,"version":0.1,"schema":{"type":"object","properties":{"keepalive_pool":{"type":"integer","default":5,"minimum":1},"authorization":{"service_token":{"type":"string"}},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"keepalive":{"type":"boolean","default":true},"timeout":{"type":"integer","default":3000,"minimum":100},"ssl_verify":{"type":"boolean","default":true},"keepalive_timeout":{"type":"integer","default":60000,"minimum":1000},"function_uri":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema","required":["function_uri"]}},"jwt-remote-auth":{"priority":2500,"version":0.1,"schema":{"type":"object","properties":{"header_name":{"type":"string","default":"Authorization"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"validation_url":{"type":"string"}},"$comment":"this is a mark for our injected plugin schema","required":["validation_url"]}},"real-ip":{"priority":23000,"version":0.1,"schema":{"type":"object","properties":{"recursive":{"type":"boolean","default":false},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"source":{"type":"string","minLength":1},"trusted_addresses":{"type":"array","items":{"anyOf":[{"type":"string","title":"IPv4","format":"ipv4"},{"type":"string","title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"type":"string","title":"IPv6","format":"ipv6"},{"type":"string","title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"minItems":1}},"$comment":"this is a mark for our injected plugin schema","required":["source"]}},"ai":{"priority":22900,"version":0.1,"schema":{"$comment":"this is a mark for our injected plugin schema","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}}},"scope":"global"},"client-control":{"priority":22000,"version":0.1,"schema":{"type":"object","properties":{"max_body_size":{"type":"integer","description":"Maximum message body size in bytes. No restriction when set to 0.","minimum":0},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema"}},"proxy-control":{"priority":21990,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"request_buffering":{"type":"boolean","default":true}},"$comment":"this is a mark for our injected plugin schema"}},"request-id":{"priority":12015,"version":0.1,"schema":{"type":"object","properties":{"algorithm":{"type":"string","enum":["uuid","nanoid","range_id"],"default":"uuid"},"header_name":{"type":"string","default":"X-Request-Id"},"range_id":{"type":"object","properties":{"length":{"type":"integer","default":16,"minimum":6},"char_set":{"type":"string","minLength":6,"default":"abcdefghijklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ0123456789"}},"default":{}},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"include_in_response":{"type":"boolean","default":true}},"$comment":"this is a mark for our injected plugin schema"}},"zipkin":{"priority":12011,"version":0.1,"schema":{"type":"object","properties":{"span_version":{"enum":[1,2],"default":2},"endpoint":{"type":"string"},"sample_ratio":{"type":"number","maximum":1,"minimum":1e-05},"service_name":{"type":"string","description":"service name for zipkin reporter","default":"APISIX"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"server_addr":{"type":"string","description":"default is $server_addr, you can specify your external ip address","pattern":"^[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}$"}},"$comment":"this is a mark for our injected plugin schema","required":["endpoint","sample_ratio"]}},"ext-plugin-pre-req":{"priority":12000,"version":0.1,"schema":{"type":"object","properties":{"conf":{"type":"array","items":{"type":"object","properties":{"value":{"type":"string"},"name":{"type":"string","minLength":1,"maxLength":128}},"required":["name","value"]},"minItems":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"allow_degradation":{"type":"boolean","default":false}},"$comment":"this is a mark for our injected plugin schema"}},"fault-injection":{"priority":11000,"version":0.1,"schema":{"type":"object","properties":{"abort":{"type":"object","properties":{"percentage":{"type":"integer","maximum":100,"minimum":0},"vars":{"type":"array","maxItems":20,"items":{"type":"array"}},"body":{"type":"string","minLength":0},"http_status":{"type":"integer","minimum":200},"headers":{"type":"object","minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}}}},"required":["http_status"]},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"delay":{"type":"object","properties":{"percentage":{"type":"integer","maximum":100,"minimum":0},"vars":{"type":"array","maxItems":20,"items":{"type":"array"}},"duration":{"type":"number","minimum":0}},"required":["duration"]}},"$comment":"this is a mark for our injected plugin schema","minProperties":1}},"mocking":{"priority":10900,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"response_headers":{"type":"object","minProperties":1,"patternProperties":{"^[^:]+$":{"oneOf":[{"type":"string"},{"type":"number"}]}}},"response_example":{"type":"string"},"response_schema":{"type":"object"},"with_mock_header":{"type":"boolean","default":true},"response_status":{"type":"integer","minimum":100,"default":200},"content_type":{"type":"string","default":"application/json;charset=utf8"},"delay":{"type":"integer","default":0}},"$comment":"this is a mark for our injected plugin schema","anyOf":[{"required":["response_example"]},{"required":["response_schema"]}]}},"serverless-pre-function":{"priority":10000,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"phase":{"type":"string","enum":["rewrite","access","header_filter","body_filter","log","before_proxy"],"default":"access"},"functions":{"type":"array","items":{"type":"string"},"minItems":1}},"$comment":"this is a mark for our injected plugin schema","required":["functions"]}},"cors":{"priority":4000,"version":0.1,"schema":{"type":"object","properties":{"expose_headers":{"type":"string","description":"multiple header use ',' to split.If not specified, no custom headers are exposed."},"allow_origins_by_metadata":{"type":"array","description":"set allowed origins by referencing origins in plugin metadata","uniqueItems":true,"items":{"type":"string","minLength":1,"maxLength":4096},"minItems":1},"timing_allow_origins":{"type":"string","description":"you can use '*' to allow all origins which can view timing information when no credentials,'**' to allow forcefully (it will bring some security risks, be careful),multiple origin use ',' to split. default: nil","pattern":"^(\\*|\\*\\*|null|\\w+://[^,]+(,\\w+://[^,]+)*)$"},"allow_origins":{"type":"string","description":"you can use '*' to allow all origins when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple origin use ',' to split. default: *.","pattern":"^(\\*|\\*\\*|null|\\w+://[^,]+(,\\w+://[^,]+)*)$","default":"*"},"timing_allow_origins_by_regex":{"type":"array","description":"you can use regex to allow specific origins which can view timing information,for example use [.*\\.test.com] to allow a.test.com and b.test.com","uniqueItems":true,"items":{"type":"string","minLength":1,"maxLength":4096},"minItems":1},"allow_methods":{"type":"string","description":"you can use '*' to allow all methods when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple method use ',' to split. default: *.","default":"*"},"allow_credential":{"type":"boolean","description":"allow client append credential. according to CORS specification,if you set this option to 'true', you can not use '*' for other options.","default":false},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"allow_headers":{"type":"string","description":"you can use '*' to allow all header when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple header use ',' to split. default: *.","default":"*"},"allow_origins_by_regex":{"type":"array","description":"you can use regex to allow specific origins when no credentials,for example use [.*\\.test.com$] to allow a.test.com and b.test.com","uniqueItems":true,"items":{"type":"string","minLength":1,"maxLength":4096},"minItems":1},"max_age":{"type":"integer","description":"maximum number of seconds the results can be cached.-1 means no cached, the max value is depend on browser,more details plz check MDN. default: 5.","default":5}},"$comment":"this is a mark for our injected plugin schema"},"metadata_schema":{"type":"object","properties":{"allow_origins":{"type":"object","additionalProperties":{"type":"string","pattern":"^(\\*|\\*\\*|null|\\w+://[^,]+(,\\w+://[^,]+)*)$"}}}}},"ip-restriction":{"priority":3000,"version":0.1,"schema":{"type":"object","properties":{"blacklist":{"type":"array","items":{"anyOf":[{"type":"string","title":"IPv4","format":"ipv4"},{"type":"string","title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"type":"string","title":"IPv6","format":"ipv6"},{"type":"string","title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"minItems":1},"message":{"type":"string","default":"Your IP address is not allowed","minLength":1,"maxLength":1024},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"whitelist":{"type":"array","items":{"anyOf":[{"type":"string","title":"IPv4","format":"ipv4"},{"type":"string","title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"type":"string","title":"IPv6","format":"ipv6"},{"type":"string","title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"minItems":1}},"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"$comment":"this is a mark for our injected plugin schema"}},"ua-restriction":{"priority":2999,"version":0.1,"schema":{"type":"object","properties":{"allowlist":{"type":"array","items":{"type":"string","minLength":1},"minItems":1},"denylist":{"type":"array","items":{"type":"string","minLength":1},"minItems":1},"bypass_missing":{"type":"boolean","default":false},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"message":{"type":"string","default":"Not allowed","minLength":1,"maxLength":1024}},"oneOf":[{"required":["allowlist"]},{"required":["denylist"]}],"$comment":"this is a mark for our injected plugin schema"}},"referer-restriction":{"priority":2990,"version":0.1,"schema":{"type":"object","properties":{"blacklist":{"type":"array","items":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"minItems":1},"bypass_missing":{"type":"boolean","default":false},"whitelist":{"type":"array","items":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:]+$"},"minItems":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"message":{"type":"string","default":"Your referer host is not allowed","minLength":1,"maxLength":1024}},"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"$comment":"this is a mark for our injected plugin schema"}},"csrf":{"priority":2980,"version":0.1,"schema":{"type":"object","properties":{"key":{"type":"string","description":"use to generate csrf token"},"expires":{"type":"integer","description":"expires time(s) for csrf token","default":7200},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"name":{"type":"string","description":"the csrf token name","default":"apisix-csrf-token"}},"required":["key"],"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["key"]}},"uri-blocker":{"priority":2900,"version":0.1,"schema":{"type":"object","properties":{"block_rules":{"type":"array","items":{"type":"string","minLength":1,"maxLength":4096},"uniqueItems":true},"case_insensitive":{"type":"boolean","default":false},"rejected_code":{"type":"integer","default":403,"minimum":200},"rejected_msg":{"type":"string","minLength":1},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema","required":["block_rules"]}},"request-validation":{"priority":2800,"version":0.1,"schema":{"type":"object","properties":{"header_schema":{"type":"object"},"body_schema":{"type":"object"},"rejected_code":{"type":"integer","default":400,"maximum":599,"minimum":200},"rejected_msg":{"type":"string","minLength":1,"maxLength":256},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema","anyOf":[{"required":["header_schema"]},{"required":["body_schema"]}]},"type":"validation"},"chaitin-waf":{"priority":2700,"version":0.1,"schema":{"type":"object","properties":{"config":{"type":"object","properties":{"connect_timeout":{"type":"integer"},"read_timeout":{"type":"integer"},"send_timeout":{"type":"integer"},"keepalive_timeout":{"type":"integer"},"req_body_size":{"type":"integer"},"keepalive_size":{"type":"integer"}}},"append_waf_resp_header":{"type":"boolean","default":true},"append_waf_debug_header":{"type":"boolean","default":false},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"match":{"type":"array","items":{"type":"object","properties":{"vars":{"type":"array"}}}}},"$comment":"this is a mark for our injected plugin schema"},"metadata_schema":{"type":"object","properties":{"config":{"type":"object","properties":{"connect_timeout":{"type":"integer","default":1000},"read_timeout":{"type":"integer","default":1000},"send_timeout":{"type":"integer","default":1000},"keepalive_timeout":{"type":"integer","default":60000},"req_body_size":{"type":"integer","default":1024},"keepalive_size":{"type":"integer","default":256}},"default":{}},"nodes":{"type":"array","items":{"type":"object","properties":{"host":{"type":"string","pattern":"^\\*?[0-9a-zA-Z-._\\[\\]:/]+$"},"port":{"type":"integer","default":80,"minimum":1}},"required":["host"]},"minItems":1}},"required":["nodes"]}},"multi-auth":{"priority":2600,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"auth_plugins":{"type":"array","minItems":2}},"title":"work with route or service object","required":["auth_plugins"],"$comment":"this is a mark for our injected plugin schema"},"type":"auth"},"openid-connect":{"priority":2599,"version":0.2,"schema":{"type":"object","properties":{"claim_validator":{"type":"object","properties":{"issuer":{"type":"object","description":"Whitelist the vetted issuers of the jwt.\n                    When not passed by the user, the issuer returned by\n                    discovery endpoint will be used. In case both are missing,\n                    the issuer will not be validated.","properties":{"valid_issuers":{"type":"array","items":{"type":"string"}}}},"audience":{"type":"object","description":"audience claim value to validate","properties":{"claim":{"type":"string","description":"custom claim name","default":"aud"},"match_with_client_id":{"type":"boolean","description":"audience must euqal to or includes client_id","default":false},"required":{"type":"boolean","description":"audience claim is required","default":false}}}}},"revoke_tokens_on_logout":{"type":"boolean","description":"Notify authorization server a previous token is no longer needed.","default":false},"jwk_expires_in":{"type":"integer","description":"Expiration time for JWK cache in seconds.","default":86400},"session":{"type":"object","properties":{"secret":{"type":"string","description":"the key used for the encrypt and HMAC calculation","minLength":16},"cookie":{"type":"object","properties":{"lifetime":{"type":"integer","description":"it holds the cookie lifetime in seconds in the future"}}}},"additionalProperties":false,"required":["secret"]},"jwt_verification_cache_ignore":{"type":"boolean","description":"Whether to ignore cached verification and re-verify.","default":false},"logout_path":{"type":"string","default":"/logout"},"redirect_uri":{"type":"string","description":"auto append '.apisix/redirect' to ngx.var.uri if not configured"},"introspection_interval":{"type":"integer","description":"TTL of the cached and introspected access token in seconds.","default":0},"post_logout_redirect_uri":{"type":"string","description":"the URI will be redirect when request logout_path"},"introspection_expiry_claim":{"type":"string","description":"Name of the expiry claim that controls the cached access token TTL."},"unauth_action":{"type":"string","description":"The action performed when client is not authorized. Use auth to redirect user to identity provider, deny to respond with 401 Unauthorized, and pass to allow the request regardless.","enum":["auth","deny","pass"],"default":"auth"},"public_key":{"type":"string"},"required_scopes":{"type":"array","description":"List of scopes that are required to be granted to the access token","items":{"type":"string"}},"token_signing_alg_values_expected":{"type":"string"},"use_pkce":{"type":"boolean","description":"when set to true the PKCE(Proof Key for Code Exchange) will be used.","default":false},"set_access_token_header":{"type":"boolean","description":"Whether the access token should be added as a header to the request for downstream","default":true},"access_token_in_authorization_header":{"type":"boolean","description":"Whether the access token should be added in the Authorization header as opposed to the X-Access-Token header.","default":false},"ssl_verify":{"type":"boolean","default":false},"set_id_token_header":{"type":"boolean","description":"Whether the ID token should be added in the X-ID-Token header to the request for downstream.","default":true},"set_userinfo_header":{"type":"boolean","description":"Whether the user info token should be added in the X-Userinfo header to the request for downstream.","default":true},"proxy_opts":{"type":"object","description":"HTTP proxy server be used to access identity server.","properties":{"no_proxy":{"type":"string","description":"Comma separated list of hosts that should not be proxied."},"https_proxy_authorization":{"type":"string","description":"Basic [base64 username:password]."},"http_proxy_authorization":{"type":"string","description":"Basic [base64 username:password]."},"http_proxy":{"type":"string","description":"HTTP proxy like: http://proxy-server:80."},"https_proxy":{"type":"string","description":"HTTPS proxy like: http://proxy-server:80."}}},"set_refresh_token_header":{"type":"boolean","description":"Whether the refresh token should be added in the X-Refresh-Token header to the request for downstream.","default":false},"timeout":{"type":"integer","description":"timeout in seconds","default":3,"minimum":1},"client_id":{"type":"string"},"authorization_params":{"type":"object","description":"Extra authorization params to the authorize endpoint"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"client_rsa_private_key":{"type":"string","description":"Client RSA private key used to sign JWT."},"introspection_addon_headers":{"type":"array","description":"Extra http headers in introspection","items":{"type":"string","pattern":"^[^:]+$"},"minItems":1},"client_rsa_private_key_id":{"type":"string","description":"Client RSA private key ID used to compute a signed JWT."},"cache_segment":{"type":"string","description":"Name of a cache segment to differentiate caches."},"client_jwt_assertion_expires_in":{"type":"integer","description":"Life duration of the signed JWT in seconds.","default":60},"use_nonce":{"type":"boolean","description":"Whether to include nonce parameter in authorization request.","default":false},"renew_access_token_on_expiry":{"type":"boolean","description":"Whether to attempt silently renewing the access token.","default":true},"discovery":{"type":"string"},"access_token_expires_in":{"type":"integer","description":"Lifetime of the access token in seconds if expires_in is not present."},"accept_none_alg":{"type":"boolean","description":"Set to true if the OpenID provider does not sign its ID token.","default":false},"client_secret":{"type":"string"},"scope":{"type":"string","default":"openid"},"iat_slack":{"type":"integer","description":"Tolerance of clock skew in seconds with the iat claim in an ID token.","default":120},"introspection_endpoint":{"type":"string"},"introspection_endpoint_auth_method":{"type":"string","default":"client_secret_basic"},"accept_unsupported_alg":{"type":"boolean","description":"Ignore ID token signature to accept unsupported signature algorithm.","default":true},"token_endpoint_auth_method":{"type":"string","default":"client_secret_basic"},"bearer_only":{"type":"boolean","default":false},"access_token_expires_leeway":{"type":"integer","description":"Expiration leeway in seconds for access token renewal.","default":0},"refresh_session_interval":{"type":"integer","description":"Time interval to refresh user ID token without re-authentication."},"force_reauthorize":{"type":"boolean","description":"Whether to execute the authorization flow when a token has been cached.","default":false},"realm":{"type":"string","default":"apisix"}},"required":["client_id","client_secret","discovery"],"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["client_secret","client_rsa_private_key"]}},"authz-casbin":{"priority":2560,"version":0.1,"schema":{"type":"object","properties":{"username":{"type":"string"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"model_path":{"type":"string"},"policy_path":{"type":"string"},"policy":{"type":"string"},"model":{"type":"string"}},"oneOf":[{"required":["model_path","policy_path","username"]},{"required":["model","policy","username"]}],"$comment":"this is a mark for our injected plugin schema"},"metadata_schema":{"type":"object","properties":{"model":{"type":"string"},"policy":{"type":"string"}},"required":["model","policy"]}},"authz-casdoor":{"priority":2559,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"client_secret":{"type":"string"},"client_id":{"type":"string"},"endpoint_addr":{"type":"string","pattern":"^[^%?]+[^/]$"},"callback_url":{"type":"string","pattern":"^[^%?]+[^/]$"}},"required":["callback_url","endpoint_addr","client_id","client_secret"],"$comment":"this is a mark for our injected plugin schema","encrypt_fields":["client_secret"]}},"wolf-rbac":{"priority":2555,"version":0.1,"schema":{"type":"object","properties":{"header_prefix":{"type":"string","default":"X-"},"server":{"type":"string","default":"http://127.0.0.1:12180"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"appid":{"type":"string","default":"unset"}},"$comment":"this is a mark for our injected plugin schema"},"type":"auth"},"ldap-auth":{"priority":2540,"version":0.1,"consumer_schema":{"type":"object","properties":{"user_dn":{"type":"string"}},"title":"work with consumer object","required":["user_dn"]},"schema":{"type":"object","properties":{"use_tls":{"type":"boolean","default":false},"tls_verify":{"type":"boolean","default":false},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"uid":{"type":"string","default":"cn"},"base_dn":{"type":"string"},"ldap_uri":{"type":"string"}},"title":"work with route or service object","required":["base_dn","ldap_uri"],"$comment":"this is a mark for our injected plugin schema"},"type":"auth"},"hmac-auth":{"priority":2530,"version":0.1,"consumer_schema":{"type":"object","properties":{"secret_key":{"type":"string","minLength":1,"maxLength":256},"key_id":{"type":"string","minLength":1,"maxLength":256}},"title":"work with consumer object","required":["key_id","secret_key"],"encrypt_fields":["secret_key"]},"schema":{"type":"object","properties":{"allowed_algorithms":{"type":"array","minItems":1,"items":{"type":"string","enum":["hmac-sha1","hmac-sha256","hmac-sha512"]},"default":["hmac-sha1","hmac-sha256","hmac-sha512"]},"clock_skew":{"type":"integer","minimum":1,"default":300},"signed_headers":{"type":"array","items":{"type":"string","minLength":1,"maxLength":50}},"anonymous_consumer":{"type":"string","minLength":"1"},"validate_request_body":{"type":"boolean","title":"A boolean value telling the plugin to enable body validation","default":false},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"hide_credentials":{"type":"boolean","default":false}},"title":"work with route or service object","$comment":"this is a mark for our injected plugin schema"},"type":"auth"},"basic-auth":{"priority":2520,"version":0.1,"consumer_schema":{"type":"object","properties":{"password":{"type":"string"},"username":{"type":"string"}},"title":"work with consumer object","required":["username","password"],"encrypt_fields":["password"]},"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"hide_credentials":{"type":"boolean","default":false}},"title":"work with route or service object","anonymous_consumer":{"type":"string","minLength":"1"},"$comment":"this is a mark for our injected plugin schema"},"type":"auth"},"jwt-auth":{"priority":2510,"version":0.1,"consumer_schema":{"type":"object","properties":{"key":{"type":"string","minLength":1},"exp":{"type":"integer","default":86400,"minimum":1},"secret":{"type":"string","minLength":1},"base64_secret":{"type":"boolean","default":false},"lifetime_grace_period":{"type":"integer","default":0,"minimum":0},"algorithm":{"type":"string","enum":["HS256","HS512","RS256","ES256"],"default":"HS256"}},"required":["key"],"encrypt_fields":["secret"],"dependencies":{"algorithm":{"oneOf":[{"properties":{"algorithm":{"enum":["HS256","HS512"],"default":"HS256"}}},{"required":["public_key"],"properties":{"public_key":{"type":"string"},"algorithm":{"enum":["RS256","ES256"]}}}]}}},"schema":{"type":"object","properties":{"key_claim_name":{"type":"string","minLength":1,"default":"key"},"store_in_ctx":{"type":"boolean","default":false},"cookie":{"type":"string","default":"jwt"},"header":{"type":"string","default":"authorization"},"query":{"type":"string","default":"jwt"},"anonymous_consumer":{"type":"string","minLength":"1"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"hide_credentials":{"type":"boolean","default":false}},"$comment":"this is a mark for our injected plugin schema"},"type":"auth"},"jwe-decrypt":{"priority":2509,"version":0.1,"consumer_schema":{"type":"object","properties":{"key":{"type":"string"},"is_base64_encoded":{"type":"boolean"},"secret":{"type":"string"}},"encrypt_fields":["key","secret"],"required":["key","secret"]},"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"strict":{"type":"boolean","default":true},"forward_header":{"type":"string","default":"Authorization"},"header":{"type":"string","default":"Authorization"}},"$comment":"this is a mark for our injected plugin schema","required":["header","forward_header"]},"type":"auth"},"key-auth":{"priority":2500,"version":0.1,"consumer_schema":{"type":"object","properties":{"key":{"type":"string"}},"required":["key"],"encrypt_fields":["key"]},"schema":{"type":"object","properties":{"header":{"type":"string","default":"apikey"},"query":{"type":"string","default":"apikey"},"anonymous_consumer":{"type":"string","minLength":"1"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"hide_credentials":{"type":"boolean","default":false}},"$comment":"this is a mark for our injected plugin schema"},"type":"auth"},"consumer-restriction":{"priority":2400,"version":0.1,"schema":{"type":"object","properties":{"type":{"type":"string","enum":["consumer_name","service_id","route_id","consumer_group_id"],"default":"consumer_name"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"blacklist":{"type":"array","items":{"type":"string"},"minItems":1},"allowed_by_methods":{"type":"array","items":{"type":"object","properties":{"user":{"type":"string"},"methods":{"type":"array","items":{"type":"string","description":"HTTP method","enum":["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","CONNECT","TRACE","PURGE"]},"minItems":1}}}},"rejected_code":{"type":"integer","default":403,"minimum":200},"rejected_msg":{"type":"string"},"whitelist":{"type":"array","items":{"type":"string"},"minItems":1}},"$comment":"this is a mark for our injected plugin schema","anyOf":[{"required":["blacklist"]},{"required":["whitelist"]},{"required":["allowed_by_methods"]}]}},"attach-consumer-label":{"priority":2399,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"headers":{"type":"object","additionalProperties":{"type":"string","pattern":"^\\$.*"},"minProperties":1}},"$comment":"this is a mark for our injected plugin schema","required":["headers"]}},"forward-auth":{"priority":2002,"version":0.1,"schema":{"type":"object","properties":{"request_headers":{"type":"array","description":"client request header that will be sent to the authorization service","items":{"type":"string"},"default":{}},"status_on_error":{"type":"integer","default":403,"maximum":599,"minimum":200},"uri":{"type":"string"},"upstream_headers":{"type":"array","description":"authorization response header that will be sent to the upstream","items":{"type":"string"},"default":{}},"keepalive_timeout":{"type":"integer","default":60000,"minimum":1000},"client_headers":{"type":"array","description":"authorization response header that will be sent tothe client when authorizing failed","items":{"type":"string"},"default":{}},"keepalive_pool":{"type":"integer","default":5,"minimum":1},"ssl_verify":{"type":"boolean","default":true},"keepalive":{"type":"boolean","default":true},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"timeout":{"type":"integer","description":"timeout in milliseconds","maximum":60000,"minimum":1,"default":3000},"request_method":{"type":"string","description":"the method for client to request the authorization service","enum":["GET","POST"],"default":"GET"},"allow_degradation":{"type":"boolean","default":false}},"$comment":"this is a mark for our injected plugin schema","required":["uri"]}},"opa":{"priority":2001,"version":0.1,"schema":{"type":"object","properties":{"send_headers_upstream":{"type":"array","description":"list of headers to pass to upstream in request","items":{"type":"string"},"minItems":1},"with_route":{"type":"boolean","default":false},"with_service":{"type":"boolean","default":false},"timeout":{"type":"integer","description":"timeout in milliseconds","maximum":60000,"minimum":1,"default":3000},"keepalive_timeout":{"type":"integer","default":60000,"minimum":1000},"keepalive_pool":{"type":"integer","default":5,"minimum":1},"ssl_verify":{"type":"boolean","default":true},"host":{"type":"string"},"keepalive":{"type":"boolean","default":true},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"policy":{"type":"string"},"with_consumer":{"type":"boolean","default":false}},"$comment":"this is a mark for our injected plugin schema","required":["host","policy"]}},"authz-keycloak":{"priority":2000,"version":0.1,"schema":{"type":"object","properties":{"grant_type":{"type":"string","maxLength":100,"enum":["urn:ietf:params:oauth:grant-type:uma-ticket"],"minLength":1,"default":"urn:ietf:params:oauth:grant-type:uma-ticket"},"http_method_as_scope":{"type":"boolean","default":false},"cache_ttl_seconds":{"type":"integer","default":86400,"minimum":1},"access_denied_redirect_uri":{"type":"string","minLength":1,"maxLength":2048},"timeout":{"type":"integer","default":3000,"minimum":1000},"client_id":{"type":"string","minLength":1,"maxLength":100},"keepalive_timeout":{"type":"integer","default":60000,"minimum":1000},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"password_grant_token_generation_incoming_uri":{"type":"string","minLength":1,"maxLength":4096},"access_token_expires_in":{"type":"integer","default":300,"minimum":1},"refresh_token_expires_leeway":{"type":"integer","default":0,"minimum":0},"client_secret":{"type":"string","minLength":1,"maxLength":100},"discovery":{"type":"string","minLength":1,"maxLength":4096},"refresh_token_expires_in":{"type":"integer","default":3600,"minimum":1},"resource_registration_endpoint":{"type":"string","minLength":1,"maxLength":4096},"keepalive_pool":{"type":"integer","default":5,"minimum":1},"ssl_verify":{"type":"boolean","default":true},"permissions":{"type":"array","uniqueItems":true,"items":{"type":"string","minLength":1,"maxLength":100},"default":{}},"keepalive":{"type":"boolean","default":true},"access_token_expires_leeway":{"type":"integer","default":0,"minimum":0},"policy_enforcement_mode":{"type":"string","enum":["ENFORCING","PERMISSIVE"],"default":"ENFORCING"},"lazy_load_paths":{"type":"boolean","default":false},"token_endpoint":{"type":"string","minLength":1,"maxLength":4096}},"required":["client_id"],"$comment":"this is a mark for our injected plugin schema","allOf":[{"anyOf":[{"required":["discovery"]},{"required":["token_endpoint"]}]},{"anyOf":[{"properties":{"lazy_load_paths":{"enum":[false]}}},{"anyOf":[{"required":["discovery"]},{"required":["resource_registration_endpoint"]}],"properties":{"lazy_load_paths":{"enum":[true]}}}]}],"encrypt_fields":["client_secret"]}},"proxy-cache":{"priority":1085,"version":0.2,"schema":{"type":"object","properties":{"no_cache":{"type":"array","items":{"type":"string","pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)"},"minItems":1},"cache_ttl":{"type":"integer","default":300,"minimum":1},"cache_zone":{"type":"string","default":"disk_cache_one","minLength":1,"maxLength":100},"cache_strategy":{"type":"string","enum":["disk","memory"],"default":"disk"},"cache_http_status":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"integer","description":"http response status","maximum":599,"minimum":200},"default":[200,301,404]},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"cache_method":{"type":"array","uniqueItems":true,"minItems":1,"items":{"type":"string","description":"supported http method","enum":["GET","POST","HEAD"]},"default":["GET","HEAD"]},"cache_key":{"type":"array","minItems":1,"items":{"type":"string","description":"a key for caching","pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)"},"default":["$host","$request_uri"]},"hide_cache_headers":{"type":"boolean","default":false},"cache_control":{"type":"boolean","default":false},"cache_bypass":{"type":"array","items":{"type":"string","pattern":"(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)"},"minItems":1}},"$comment":"this is a mark for our injected plugin schema"}}},"stream_plugins":{"ip-restriction":{"priority":3000,"version":0.1,"schema":{"type":"object","properties":{"blacklist":{"type":"array","items":{"anyOf":[{"type":"string","title":"IPv4","format":"ipv4"},{"type":"string","title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"type":"string","title":"IPv6","format":"ipv6"},{"type":"string","title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"minItems":1},"message":{"type":"string","default":"Your IP address is not allowed","minLength":1,"maxLength":1024},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"whitelist":{"type":"array","items":{"anyOf":[{"type":"string","title":"IPv4","format":"ipv4"},{"type":"string","title":"IPv4/CIDR","pattern":"^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"},{"type":"string","title":"IPv6","format":"ipv6"},{"type":"string","title":"IPv6/CIDR","pattern":"^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"}]},"minItems":1}},"oneOf":[{"required":["whitelist"]},{"required":["blacklist"]}],"$comment":"this is a mark for our injected plugin schema"}},"limit-conn":{"priority":1003,"version":0.1,"schema":{"type":"object","properties":{"key":{"type":"string"},"burst":{"type":"integer","minimum":0},"default_conn_delay":{"type":"number","exclusiveMinimum":0},"only_use_default_delay":{"type":"boolean","default":false},"key_type":{"type":"string","enum":["var","var_combination"],"default":"var"},"conn":{"type":"integer","exclusiveMinimum":0},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema","required":["conn","burst","default_conn_delay","key"]}},"mqtt-proxy":{"priority":1000,"version":0.1,"schema":{"type":"object","properties":{"protocol_name":{"type":"string"},"protocol_level":{"type":"integer"},"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false}},"$comment":"this is a mark for our injected plugin schema","required":["protocol_name","protocol_level"]}},"syslog":{"priority":401,"version":0.1,"schema":{"type":"object","properties":{"_meta":{"type":"object","properties":{"priority":{"type":"integer","description":"priority of plugins by customized order"},"disable":{"type":"boolean"},"pre_function":{"type":"string","description":"function to be executed in each phase before execution of plugins. The pre_function will have access to two arguments: `conf` and `ctx`."},"filter":{"type":"array","description":"filter determines whether the plugin needs to be executed at runtime"},"error_response":{"oneOf":[{"type":"string"},{"type":"object"}]}},"additionalProperties":false},"max_retry_count":{"type":"integer","minimum":0,"default":0},"host":{"type":"string"},"batch_max_size":{"type":"integer","minimum":1,"default":1000},"timeout":{"type":"integer","default":3000,"minimum":1},"log_format":{"type":"object"},"port":{"type":"integer"},"inactive_timeout":{"type":"integer","minimum":1,"default":5},"pool_size":{"type":"integer","default":5,"minimum":5},"flush_limit":{"type":"integer","default":4096,"minimum":1},"drop_limit":{"type":"integer","default":1048576},"sock_type":{"type":"string","enum":["tcp","udp"],"default":"tcp"},"tls":{"type":"boolean","default":false},"retry_delay":{"type":"integer","minimum":0,"default":1},"buffer_duration":{"type":"integer","minimum":1,"default":60},"name":{"type":"string","default":"stream sys logger"}},"$comment":"this is a mark for our injected plugin schema","required":["host","port"]},"metadata_schema":{"type":"object","properties":{"log_format":{"type":"object"}}}}}}
